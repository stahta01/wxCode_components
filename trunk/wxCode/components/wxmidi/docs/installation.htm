<html>
<!-- RCS-ID: $Id$ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>wxMidi installation procedure</title>
<link rel="stylesheet" media="all" href="singledoc.css" type="text/css" />
</head>
<body>

<h1>wxMidi 1.x installation</h1>

<p>wxMidi has been developed and tested in Windows. Makefiles included in this distribution are only
for MS Visual Studio 2003 .NET.  Sorry, but I do not have equipment/knowledge to give
support for other compilers/platforms. Any help with this will be appreciated.</p>

<h2>Microsoft Windows wxMidi 1.x installation</h2>

<h3>wxMidi 1.x package structure</h3>

<table>
<table class="Lista">
<thead class="ListaImpar">
    <td class="ListaImpar">Directory</td>
    <td class="ListaImpar">Contents</td>
	</thead>
<tr class="ListaPar">
    <td class="ListaPar">build/msw</td>
    <td class="ListaPar">makefiles and project files for compiling the project.
    Version MS VC++</td></tr>
<tr class="ListaPar">
    <td class="ListaPar">samples/midisound</td>
    <td class="ListaPar">source files the sample application</td></tr>
<tr class="ListaPar">
    <td class="ListaPar">src/wxMidi</td>
    <td class="ListaPar">source files for wxMidi</td></tr>
<tr class="ListaPar">
    <td class="ListaPar">src/portmidi</td>
    <td class="ListaPar">portmidi package</td></tr>
<tr class="ListaPar">
    <td class="ListaPar">include</td>
    <td class="ListaPar">include files for using wxMidi</td></tr>
<tr class="ListaPar">
    <td class="ListaPar">lib</td>
    <td class="ListaPar">library files for using wxMidi</td></tr>
<tr class="ListaPar">
    <td class="ListaPar">lib/pm</td>
    <td class="ListaPar">portmidi release libraries</td></tr>
<tr class="ListaPar">
    <td class="ListaPar">lib/pmd</td>
    <td class="ListaPar">portmidi debug libraries</td></tr>
<tr class="ListaPar">
    <td class="ListaPar">doc</td>
    <td class="ListaPar">documentation</td></tr>
</table>




<h3>wxMidi 1.x Installation</h3>

<p><b>Step 1: INSTALL PORTMIDI</b></p>
<p>For windows is already done. You can skip this step.</p>

<ol>
<li>For your convenience, the portmidi package is included in this download so it is not
    necessary to do download it. In case the portmidi package were not included or you
    would like to install an updated version, download portmidi.zip and
    unzip it into directory: wxMidi\src\portmidi. <b>Be aware that the current version of PortMidi (17/nov/04) produces systematically
   a memory leak.</b> The problem is not serious as the memory leak refers to some small
   fixed blocks of memory (about 20-40 bytes, one block per MIDI device in your machine)
   allocated on initialization that are not released at termination of the portmidi package.
   <b>The problem IS FIXED in the PortMidi package included with wxMidi</b> and the patch
   has been reported to PortMidi maintainers.
   But take this into account if you decide to download the PortMidi package and install
   it instead of using the precompiled package included with wxMidi.<br /><br /></li>

<li>Compile package following the instructions in the package. Do not change
    the character set from Multibyte to Unicode. You will set this later in the
    wxMidi package.
    <b>PORTMIDI MUST BE BUILT IN MULTIBYTE MODE, AND YOU MUST ENSURE THAT CONSTANT
    PM_CHECK_ERRORS IS NOT DEFINED IN THE PORTMIDI PROJECT</b> (check that this definition
    is not included by in the predefined symbols list in the Settings dialog box).
    For Unicode versions, wxMidi takes care of converting portmidi strings to
    Unicode, so it is not necesary to build a Unicode version of portmidi libraries.
    <br /><br /></li>

<li>After successful compilation, copy the libraries to the appropiate folder (\pm folder
    for release version, \pmd folder for debug version) in wxMidi\lib:<br />
		<br />
        wxMidi\src\portmidi\pm_win\Release\pm_dll.dll    -->  wxMidi\lib\pm\pm_dll.dll<br />
        wxMidi\src\portmidi\pm_win\Release\portmidi.lib  -->  wxMidi\lib\pm\portmidi.lib<br />
        wxMidi\src\portmidi\pm_win\Release\porttime.lib  -->  wxMidi\lib\pm\porttime.lib<br />
		<br />
        wxMidi\src\portmidi\pm_win\Debug\pm_dll.dll    -->  wxMidi\lib\pmd\pm_dll.dll<br />
        wxMidi\src\portmidi\pm_win\Debug\portmidi.lib  -->  wxMidi\lib\pmd\portmidi.lib<br />
        wxMidi\src\portmidi\pm_win\Debug\porttime.lib  -->  wxMidi\lib\pmd\porttime.lib<br />
        <br /><br />
	</li>

<li>Copy include file  portmidi\pm_common\portmidi.h  to  wxMidi\include</li>
</ol>


<p><b>Setp 2: COMPILE wxMidi</b></p>
<p>For windows is already done. You can skip this step.</p>

<ol>
<li>Compile wxMidi. All makefiles and project are located in build\msw directory.
	After successful compilation you'll find the library in the subdirectory wxMidi\lib.
	Name of the compiled library follow this scheme: name begin with "wxmidi" followed by
	version number and letters indicating if the library is compiled as Unicode ('u')
	and/or debug build ('d'). Here are some examples:<br />
		<br />
		  lib\wxmidi10.lib	release library<br />
		  lib\wxmidi10u.lib	release Unicode library<br />
		  lib\wxmidi10d.lib	Debug library<br />
		  lib\wxmidi10ud.lib	Debug Unicode library<br />

	<br /><br /></li>

<li>IMPORTANT! In Windows, portmidi needs the pm_dll.dll, but there is no simple way
    to set up projects to use this dll. Therefore, YOU MUST COPY this dll to your
    application executable file folder.</li>

</ol>



<p><b>Setp 3: COMPILE midisound SAMPLE TEST APPLICATION</b></p>

<p>For now, only project file for MS VC .NET 2003 !!</p>

<ol>
<li>Open project file in wxMidi\build\msw\midisound.sln  and build it.<br /><br /></li>

<li>Copy pm_dll.dll from wxMidi\lib\pmd\pm_dll.dll to the application.exe folder.<br /><br /></li>

<li>Run it. Good luck and enjoy!</li>

</ol>




<h3>Known bugs and problems</h3>

<ol>

<li>None<br /><br /></li>

</ol>


</body>
</html>
