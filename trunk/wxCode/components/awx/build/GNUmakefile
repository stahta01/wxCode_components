# =========================================================================
#     This makefile was generated by
#     Bakefile 0.1.9 (http://bakefile.sourceforge.net)
#     Do not modify, all changes will be overwritten!
# =========================================================================



# -------------------------------------------------------------------------
# These are configurable options:
# -------------------------------------------------------------------------

# 'install' program location 
INSTALL = install

# Location where the package is installed by 'make install' 
prefix = /usr/local

#  
AR = ar

#  
RANLIB = ranlib

# C++ compiler 
CXX = g++

# Standard flags for C++ 
CXXFLAGS = 

# Standard preprocessor flags (common for CC and CXX) 
CPPFLAGS = 

# Standard linker flags 
LDFLAGS = 

# Location and arguments of wx-config script 
WX_CONFIG = wx-config

# C++ flags to use with wxWidgets code 
WX_CXXFLAGS = `$(WX_CONFIG) --cxxflags`

# Set to 1 to build debug version [0,1]
DEBUG = 0



# -------------------------------------------------------------------------
# Do not modify the rest of this file!
# -------------------------------------------------------------------------

### Variables: ###

CPPDEPS = -MT$@ -MF`echo $@ | sed -e 's,\.o$$,.d,'` -MD
AWX_LIB_CXXFLAGS = -D_THREAD_SAFE -pthread -I../include $(____DEBUG) \
	$(____DEBUG_0) $(____DEBUG_1) $(WX_CXXFLAGS) $(CPPFLAGS) $(CXXFLAGS)
AWX_LIB_OBJECTS =  \
	$(OUTPUT)/awx_lib_button.o \
	$(OUTPUT)/awx_lib_choice.o \
	$(OUTPUT)/awx_lib_grayimage.o \
	$(OUTPUT)/awx_lib_led.o \
	$(OUTPUT)/awx_lib_obdlg.o \
	$(OUTPUT)/awx_lib_outbar.o \
	$(OUTPUT)/awx_lib_toolbar.o
AWXTEST_CXXFLAGS = -I../include -D_THREAD_SAFE -pthread $(____DEBUG) \
	$(____DEBUG_0) $(____DEBUG_1) $(WX_CXXFLAGS) $(CPPFLAGS) $(CXXFLAGS)
AWXTEST_OBJECTS =  \
	$(OUTPUT)/awxtest_main.o \
	$(OUTPUT)/awxtest_menu.o \
	$(OUTPUT)/awxtest_prefs.o \
	$(OUTPUT)/awxtest_prefs_wdr.o

### Conditionally set variables: ###

ifeq ($(DEBUG),0)
OUTPUT = release
endif
ifeq ($(DEBUG),1)
OUTPUT = debug
endif
ifeq ($(DEBUG),1)
LIBFLAG = d
endif
ifeq ($(DEBUG),0)
BEFORE_WX_LIBS = `$(WX_CONFIG) --libs core,base  --debug=no`
endif
ifeq ($(DEBUG),1)
BEFORE_WX_LIBS = `$(WX_CONFIG) --libs core,base  --debug=yes`
endif
ifeq ($(DEBUG),0)
____DEBUG = -DNDEBUG
endif
ifeq ($(DEBUG),1)
____DEBUG = 
endif
ifeq ($(DEBUG),0)
____DEBUG_0 = -O2
endif
ifeq ($(DEBUG),1)
____DEBUG_0 = -O0
endif
ifeq ($(DEBUG),0)
____DEBUG_1 = 
endif
ifeq ($(DEBUG),1)
____DEBUG_1 = -g
endif


all: $(OUTPUT)
$(OUTPUT):
	@mkdir -p $(OUTPUT)

### Targets: ###

all: ../lib/libwxawx$(LIBFLAG)-0.3.a $(OUTPUT)/awxtest tip-linux

install: all install_awx_lib
	$(INSTALL) -d $(prefix)/include/wx/awx-0.3
	for f in awx.h button.h choice.h led.h obdlg.h outbar.h toolbar.h; do \
	if test ! -d $(prefix)/include/wx/awx-0.3/`dirname $$f` ; then \
	$(INSTALL) -d $(prefix)/include/wx/awx-0.3/`dirname $$f`; \
	fi; \
	$(INSTALL) -m 644 ../include/wx/awx-0.3//$$f $(prefix)/include/wx/awx-0.3/$$f; \
	done

uninstall: 

clean: 
	rm -f $(OUTPUT)/*.o
	rm -f $(OUTPUT)/*.d
	rm -f ../lib/libwxawx$(LIBFLAG)-0.3.a
	rm -f $(OUTPUT)/awxtest

tarball: 
	(cd ..; tar -cvzf awx-0.3.tar.gz \
	--exclude=awxtest \
	--exclude=awxtest.exe \
	--exclude=*.a \
	--exclude=*.d \
	--exclude=debug \
	--exclude=*.dll \
	--exclude=docs \
	--exclude=*.ilk \
	--exclude=*0.3* \
	--exclude=*.log \
	--exclude=*.o* \
	--exclude=*.pdb \
	--exclude=*.pyc \
	--exclude=release \
	--exclude=*.so \
	--exclude=SVN* \
	--exclude=.svn \
	--exclude=*~ \
	--exclude=*.___\
	--exclude=*.o* *)

../lib/libwxawx$(LIBFLAG)-0.3.a: $(AWX_LIB_OBJECTS)
	rm -f $@
	$(AR) rcu $@ $(AWX_LIB_OBJECTS)
	$(RANLIB) $@

install_awx_lib: 
	$(INSTALL) -d $(prefix)/lib
	$(INSTALL) -m 644 ../lib/libwxawx$(LIBFLAG)-0.3.a $(prefix)/lib

$(OUTPUT)/awxtest: $(AWXTEST_OBJECTS) ../lib/libwxawx$(LIBFLAG)-0.3.a
	$(CXX) -o $@ $(AWXTEST_OBJECTS) $(LDFLAGS)  -pthread -L../lib $(____DEBUG_1)  $(BEFORE_WX_LIBS)  ../lib/libwxawx$(LIBFLAG)-0.3.a

tip-linux: 
	@echo " "
	@echo "================================================================"
	@echo " The building of awx is finished. On Linux you'll now"
	@echo " have to run (as root):"
	@echo " "
	@echo " make DEBUG=$(DEBUG) install"
	@echo " "
	@echo " to install the libraries in $(prefix)/lib"
	@echo " and the header files in $(prefix)/include/wx/awx"
	@echo " "
	@echo " Don't forget to run ldconfig (also as root)"
	@echo " "
	@echo " awx comes with no guarantees and doesn't claim"
	@echo " to be suitable for any purpose."
	@echo "================================================================"
	@echo " "

$(OUTPUT)/awx_lib_button.o: ./../src/button.cpp
	$(CXX) -c -o $@ $(AWX_LIB_CXXFLAGS) $(CPPDEPS) $<

$(OUTPUT)/awx_lib_choice.o: ./../src/choice.cpp
	$(CXX) -c -o $@ $(AWX_LIB_CXXFLAGS) $(CPPDEPS) $<

$(OUTPUT)/awx_lib_grayimage.o: ./../src/grayimage.cpp
	$(CXX) -c -o $@ $(AWX_LIB_CXXFLAGS) $(CPPDEPS) $<

$(OUTPUT)/awx_lib_led.o: ./../src/led.cpp
	$(CXX) -c -o $@ $(AWX_LIB_CXXFLAGS) $(CPPDEPS) $<

$(OUTPUT)/awx_lib_obdlg.o: ./../src/obdlg.cpp
	$(CXX) -c -o $@ $(AWX_LIB_CXXFLAGS) $(CPPDEPS) $<

$(OUTPUT)/awx_lib_outbar.o: ./../src/outbar.cpp
	$(CXX) -c -o $@ $(AWX_LIB_CXXFLAGS) $(CPPDEPS) $<

$(OUTPUT)/awx_lib_toolbar.o: ./../src/toolbar.cpp
	$(CXX) -c -o $@ $(AWX_LIB_CXXFLAGS) $(CPPDEPS) $<

$(OUTPUT)/awxtest_main.o: ./../samples/main.cpp
	$(CXX) -c -o $@ $(AWXTEST_CXXFLAGS) $(CPPDEPS) $<

$(OUTPUT)/awxtest_menu.o: ./../samples/menu.cpp
	$(CXX) -c -o $@ $(AWXTEST_CXXFLAGS) $(CPPDEPS) $<

$(OUTPUT)/awxtest_prefs.o: ./../samples/prefs.cpp
	$(CXX) -c -o $@ $(AWXTEST_CXXFLAGS) $(CPPDEPS) $<

$(OUTPUT)/awxtest_prefs_wdr.o: ./../samples/prefs_wdr.cpp
	$(CXX) -c -o $@ $(AWXTEST_CXXFLAGS) $(CPPDEPS) $<

.PHONY: all install uninstall clean install_awx_lib


# Dependencies tracking:
-include $(OUTPUT)/*.d
