# =========================================================================
#     This makefile was generated by
#     Bakefile 0.1.9 (http://bakefile.sourceforge.net)
#     Do not modify, all changes will be overwritten!
# =========================================================================

.autodepend

!ifndef BCCDIR
!ifndef MAKEDIR
!error Your Borland compiler does not define MAKEDIR. Please define the BCCDIR variable, e.g. BCCDIR=d:\bc4
!endif
BCCDIR = $(MAKEDIR)\..
!endif



# -------------------------------------------------------------------------
# These are configurable options:
# -------------------------------------------------------------------------

# C compiler 
!ifndef CC
CC = bcc32
!endif

# Standard flags for CC 
!ifndef CFLAGS
CFLAGS = 
!endif

# Standard preprocessor flags (common for CC and CXX) 
!ifndef CPPFLAGS
CPPFLAGS = -a8 -g0
!endif

# Standard linker flags 
!ifndef LDFLAGS
LDFLAGS = 
!endif

# The LUA library main folder 
!ifndef LUADIR
LUADIR = c:\lua
!endif



# -------------------------------------------------------------------------
# Do not modify the rest of this file!
# -------------------------------------------------------------------------

### Variables: ###

TOLUA_CFLAGS = -I$(BCCDIR)\include -I..\include -I..\src\lib -I..\src\bin \
	-I$(LUADIR)\include $(CPPFLAGS) $(CFLAGS)
TOLUA_OBJECTS =  \
	..\lib\tolua_tolua_event.obj \
	..\lib\tolua_tolua_is.obj \
	..\lib\tolua_tolua_map.obj \
	..\lib\tolua_tolua_push.obj \
	..\lib\tolua_tolua_to.obj
TOLUAEXE_CFLAGS = -I$(BCCDIR)\include -I..\include -I..\src\lib -I..\src\bin \
	-I$(LUADIR)\include $(CPPFLAGS) $(CFLAGS)
TOLUAEXE_OBJECTS =  \
	..\lib\toluaexe_tolua.obj \
	..\lib\toluaexe_toluabind.obj

### Conditionally set variables: ###



all: ..\lib
..\lib:
	-if not exist ..\lib mkdir ..\lib

### Targets: ###

all: ..\lib\tolua.lib ..\lib\toluaexe.exe

clean: 
	-if exist ..\lib\*.obj del ..\lib\*.obj
	-if exist ..\lib\*.res del ..\lib\*.res
	-if exist ..\lib\*.csm del ..\lib\*.csm
	-if exist ..\lib\tolua.lib del ..\lib\tolua.lib
	-if exist ..\lib\toluaexe.exe del ..\lib\toluaexe.exe
	-if exist ..\lib\toluaexe.tds del ..\lib\toluaexe.tds
	-if exist ..\lib\toluaexe.ilc del ..\lib\toluaexe.ilc
	-if exist ..\lib\toluaexe.ild del ..\lib\toluaexe.ild
	-if exist ..\lib\toluaexe.ilf del ..\lib\toluaexe.ilf
	-if exist ..\lib\toluaexe.ils del ..\lib\toluaexe.ils

..\lib\tolua.lib: $(TOLUA_OBJECTS)
	if exist $@ del $@
	tlib /a /p4096 $@ @&&|
	$(TOLUA_OBJECTS)
|

..\lib\toluaexe.exe: $(TOLUAEXE_OBJECTS) ..\lib\tolua.lib
	ilink32 -Tpe -q $(LDFLAGS) -L$(BCCDIR)\lib -L$(BCCDIR)\lib\psdk -L$(LUADIR)\lib @&&|
	c0x32.obj $(TOLUAEXE_OBJECTS),$@,, ..\lib\tolua.lib lua.lib lualib.lib import32.lib cw32.lib,,
|
	move ..\lib\*.exe ..

..\lib\tolua_tolua_event.obj: .\..\src\lib\tolua_event.c
	$(CC) -q -c -P- -o$@ $(TOLUA_CFLAGS) $**

..\lib\tolua_tolua_is.obj: .\..\src\lib\tolua_is.c
	$(CC) -q -c -P- -o$@ $(TOLUA_CFLAGS) $**

..\lib\tolua_tolua_map.obj: .\..\src\lib\tolua_map.c
	$(CC) -q -c -P- -o$@ $(TOLUA_CFLAGS) $**

..\lib\tolua_tolua_push.obj: .\..\src\lib\tolua_push.c
	$(CC) -q -c -P- -o$@ $(TOLUA_CFLAGS) $**

..\lib\tolua_tolua_to.obj: .\..\src\lib\tolua_to.c
	$(CC) -q -c -P- -o$@ $(TOLUA_CFLAGS) $**

..\lib\toluaexe_tolua.obj: .\..\src\bin\tolua.c
	$(CC) -q -c -P- -o$@ $(TOLUAEXE_CFLAGS) $**

..\lib\toluaexe_toluabind.obj: .\..\src\bin\toluabind.c
	$(CC) -q -c -P- -o$@ $(TOLUAEXE_CFLAGS) $**

