<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Keybinder: keybinder.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000001.html">include</a>&nbsp;/&nbsp;<a class="el" href="dir_000002.html">wx</a></div>
<h1>keybinder.h</h1><a href="keybinder_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 
00002 <span class="comment">// Name:        keybinder.h</span>
00003 <span class="comment">// Purpose:     Classes for binding keypresses to commands.</span>
00004 <span class="comment">// Author:      Aleksandras Gluchovas</span>
00005 <span class="comment">// Modified by: Francesco Montorsi (6/1/2004)</span>
00006 <span class="comment">// Created:     2000/02/10</span>
00007 <span class="comment">// RCS-ID:      $Id: keybinder.h,v 2.0</span>
00008 <span class="comment">// Copyright:   (c) Aleksandras Gluchovas</span>
00009 <span class="comment">// Licence:     wxWidgets licence</span>
00011 <span class="comment"></span>
00012 
00013 
00014 
00015 <span class="preprocessor">#ifndef __KEYBINDER_G__</span>
00016 <span class="preprocessor"></span><span class="preprocessor">#define __KEYBINDER_G__</span>
00017 <span class="preprocessor"></span>
00018 <span class="preprocessor">#ifdef __GNUG__</span>
00019 <span class="preprocessor"></span><span class="preprocessor">#pragma interface "keybinder.h"</span>
00020 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00021 <span class="preprocessor"></span>
00022 <span class="comment">// required includes</span>
00023 <span class="preprocessor">#include "wx/panel.h"</span>
00024 <span class="preprocessor">#include "wx/dialog.h"</span>
00025 <span class="preprocessor">#include "wx/listbox.h"</span>
00026 <span class="preprocessor">#include "wx/treectrl.h"</span>
00027 <span class="preprocessor">#include "wx/menu.h"</span>
00028 <span class="preprocessor">#include "wx/button.h"</span>
00029 <span class="preprocessor">#include "wx/stattext.h"</span>
00030 <span class="preprocessor">#include "wx/textctrl.h"</span>
00031 <span class="preprocessor">#include "wx/combobox.h"</span>
00032 
00033 
00034 <span class="comment">// The maximum number of shortcuts associated with each wxCmd.</span>
<a name="l00035"></a><a class="code" href="keybinder_8h.html#a0">00035</a> <span class="preprocessor">#define wxCMD_MAX_SHORTCUTS                     3</span>
00036 <span class="preprocessor"></span>
00037 <span class="preprocessor">#ifndef wxID_INVALID</span>
00038 <span class="preprocessor"></span>
00039       <span class="comment">// A value used to represent an invalid id...</span>
<a name="l00040"></a><a class="code" href="keybinder_8h.html#a1">00040</a> <span class="preprocessor">      #define wxID_INVALID                      -1</span>
00041 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00042 <span class="preprocessor"></span>
00043 
00044 
00045 
<a name="l00056"></a><a class="code" href="classwxKeyBind.html">00056</a> <span class="keyword">class </span><a class="code" href="classwxKeyBind.html">wxKeyBind</a>
00057 {
00058 <span class="keyword">protected</span>:
00059 
<a name="l00061"></a><a class="code" href="classwxKeyBind.html#p0">00061</a>       <span class="keywordtype">int</span> m_nFlags;
00062 
<a name="l00064"></a><a class="code" href="classwxKeyBind.html#p1">00064</a>       <span class="keywordtype">int</span> m_nKeyCode;
00065 
00066 <span class="keyword">public</span>:
00067 
<a name="l00068"></a><a class="code" href="classwxKeyBind.html#a0">00068</a>       <a class="code" href="classwxKeyBind.html">wxKeyBind</a>() {
00069             m_nKeyCode = m_nFlags = -1;
00070       }
00071 
<a name="l00072"></a><a class="code" href="classwxKeyBind.html#a1">00072</a>       <a class="code" href="classwxKeyBind.html">wxKeyBind</a>(<span class="keywordtype">int</span> flags, <span class="keywordtype">int</span> keycode) {
00073             Set(flags, keycode);
00074       }
00075 
<a name="l00076"></a><a class="code" href="classwxKeyBind.html#a2">00076</a>       <a class="code" href="classwxKeyBind.html">wxKeyBind</a>(<span class="keyword">const</span> wxString &amp;key) {
00077             m_nFlags = StringToKeyModifier(key);
00078             m_nKeyCode = StringToKeyCode(key.AfterLast(<span class="charliteral">'+'</span>).AfterLast(<span class="charliteral">'-'</span>));
00079       }
00080 
<a name="l00081"></a><a class="code" href="classwxKeyBind.html#a3">00081</a>       <span class="keyword">virtual</span> <span class="keywordtype">void</span> DeepCopy(<span class="keyword">const</span> <a class="code" href="classwxKeyBind.html">wxKeyBind</a> *p) {
00082             m_nFlags = p-&gt;<a class="code" href="classwxKeyBind.html#p0">m_nFlags</a>;
00083             m_nKeyCode = p-&gt;<a class="code" href="classwxKeyBind.html#p1">m_nKeyCode</a>;
00084       }
00085 
<a name="l00086"></a><a class="code" href="classwxKeyBind.html#a4">00086</a>       <span class="keyword">virtual</span> ~<a class="code" href="classwxKeyBind.html">wxKeyBind</a>() {}
00087 
00088 
00089 
00090 <span class="keyword">public</span>:
00091 
<a name="l00093"></a><a class="code" href="classwxKeyBind.html#a5">00093</a>       <span class="keywordtype">void</span> Set(<span class="keywordtype">int</span> flags, <span class="keywordtype">int</span> keycode) {
00094             m_nFlags = flags;
00095             m_nKeyCode = keycode;
00096       }
00097 
<a name="l00102"></a><a class="code" href="classwxKeyBind.html#a6">00102</a>       <span class="keywordtype">void</span> Set(<span class="keyword">const</span> <a class="code" href="classwxKeyBind.html">wxKeyBind</a> &amp;key) {
00103             m_nFlags = key.<a class="code" href="classwxKeyBind.html#p0">m_nFlags</a>;
00104             m_nKeyCode = key.<a class="code" href="classwxKeyBind.html#p1">m_nKeyCode</a>;
00105       }
00106 
00108       <span class="keywordtype">bool</span> MatchKey(<span class="keyword">const</span> wxKeyEvent &amp;key) <span class="keyword">const</span>;
00109 
<a name="l00111"></a><a class="code" href="classwxKeyBind.html#a8">00111</a>       <span class="keywordtype">bool</span> Match(<span class="keyword">const</span> <a class="code" href="classwxKeyBind.html">wxKeyBind</a> &amp;key)<span class="keyword"> const </span>{
00112             <span class="keywordflow">if</span> (m_nFlags == key.<a class="code" href="classwxKeyBind.html#p0">m_nFlags</a> &amp;&amp; m_nKeyCode == key.<a class="code" href="classwxKeyBind.html#p1">m_nKeyCode</a>)
00113                   <span class="keywordflow">return</span> TRUE;
00114             <span class="keywordflow">return</span> FALSE;
00115       }
00116 
00117 
00118 
00119       <span class="comment">// Getters</span>
00120       <span class="comment">// ------------------</span>
00121 
<a name="l00122"></a><a class="code" href="classwxKeyBind.html#a9">00122</a>       <span class="keywordtype">int</span> GetKeyCode()<span class="keyword"> const </span>{
00123             <span class="keywordflow">return</span> m_nKeyCode;
00124       }
00125 
<a name="l00126"></a><a class="code" href="classwxKeyBind.html#a10">00126</a>       <span class="keywordtype">int</span> GetModifiers()<span class="keyword"> const </span>{
00127             <span class="keywordflow">return</span> m_nFlags;
00128       }
00129 
00130       <span class="comment">// Returns the string which describes this key combination.</span>
<a name="l00131"></a><a class="code" href="classwxKeyBind.html#a11">00131</a>       wxString GetStr()<span class="keyword"> const </span>{
00132             <span class="keywordflow">return</span> KeyModifierToString(m_nFlags) + 
00133                   KeyCodeToString(m_nKeyCode);
00134       }
00135 
00136 
00137 <span class="keyword">public</span>:           <span class="comment">// static utilities</span>
00138 
00139       <span class="keyword">static</span> wxString NumpadKeyCodeToString(<span class="keywordtype">int</span> keyCode);
00140       <span class="keyword">static</span> wxString KeyCodeToString(<span class="keywordtype">int</span> keyCode);
00141       <span class="keyword">static</span> wxString KeyModifierToString(<span class="keywordtype">int</span> keyModifier);
00142 
00143       <span class="keyword">static</span> <span class="keywordtype">int</span> StringToKeyCode(<span class="keyword">const</span> wxString &amp;keyName);
00144       <span class="keyword">static</span> <span class="keywordtype">int</span> StringToKeyModifier(<span class="keyword">const</span> wxString &amp;keyModifier);
00145 
00146       <span class="keyword">static</span> <span class="keywordtype">int</span> GetKeyModifier(wxKeyEvent &amp;event);
00147       <span class="keyword">static</span> wxString GetKeyStrokeString(wxKeyEvent &amp;event);
00148 };
00149 
00150 
00151 
00152 
<a name="l00162"></a><a class="code" href="classwxCmd.html">00162</a> <span class="keyword">class </span><a class="code" href="classwxCmd.html">wxCmd</a>
00163 {
00164       <span class="comment">// wxKeyBinder must be allowed to call #Exec()</span>
<a name="l00165"></a><a class="code" href="classwxCmd.html#n0">00165</a>       <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classwxKeyBinder.html">wxKeyBinder</a>;
00166 
00167 <span class="keyword">protected</span>:
00168 
<a name="l00170"></a><a class="code" href="classwxCmd.html#p0">00170</a>       <a class="code" href="classwxKeyBind.html">wxKeyBind</a> m_keyShortcut[wxCMD_MAX_SHORTCUTS];
<a name="l00171"></a><a class="code" href="classwxCmd.html#p1">00171</a>       <span class="keywordtype">int</span> m_nShortcuts;       
00172 
<a name="l00174"></a><a class="code" href="classwxCmd.html#p2">00174</a>       wxString m_strName;
00175 
<a name="l00177"></a><a class="code" href="classwxCmd.html#p3">00177</a>       wxString m_strDescription;
00178 
<a name="l00180"></a><a class="code" href="classwxCmd.html#p4">00180</a>       <span class="keywordtype">int</span> m_nId;
00181 
00182 <span class="keyword">public</span>:
00183 
<a name="l00184"></a><a class="code" href="classwxCmd.html#a0">00184</a>       <a class="code" href="classwxCmd.html">wxCmd</a>(<span class="keyword">const</span> <a class="code" href="classwxKeyBind.html">wxKeyBind</a> &amp;first, <span class="keywordtype">int</span> <span class="keywordtype">id</span>, 
00185             <span class="keyword">const</span> wxString &amp;name = wxEmptyString,
00186             <span class="keyword">const</span> wxString &amp;desc = wxEmptyString) {
00187             m_strName = name;
00188             m_strDescription = desc;
00189             m_nShortcuts = 1;
00190             m_keyShortcut[0] = first;
00191             m_nId = id;
00192       }
00193 
<a name="l00194"></a><a class="code" href="classwxCmd.html#a1">00194</a>       <a class="code" href="classwxCmd.html">wxCmd</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span> = wxID_INVALID, 
00195             <span class="keyword">const</span> wxString &amp;name = wxEmptyString,
00196             <span class="keyword">const</span> wxString &amp;desc = wxEmptyString) {
00197             m_strName = name;
00198             m_strDescription = desc;
00199             m_nId = id;
00200             m_nShortcuts = 0;
00201       }
00202 
<a name="l00203"></a><a class="code" href="classwxCmd.html#a2">00203</a>       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classwxKeyBinder.html#a2">DeepCopy</a>(<span class="keyword">const</span> <a class="code" href="classwxCmd.html">wxCmd</a> *cmd) {
00204             m_strName = cmd-&gt;<a class="code" href="classwxCmd.html#p2">m_strName</a>;
00205             m_strDescription = cmd-&gt;<a class="code" href="classwxCmd.html#p3">m_strDescription</a>;
00206             m_nId = cmd-&gt;<a class="code" href="classwxCmd.html#p4">m_nId</a>;
00207             m_nShortcuts = cmd-&gt;<a class="code" href="classwxCmd.html#p1">m_nShortcuts</a>;
00208 
00209             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; m_nShortcuts; i++)
00210                   m_keyShortcut[i].<a class="code" href="classwxKeyBind.html#a3">DeepCopy</a>(&amp;cmd-&gt;<a class="code" href="classwxCmd.html#p0">m_keyShortcut</a>[i]);
00211       }
00212 
00213       <span class="keyword">virtual</span> <a class="code" href="classwxCmd.html">wxCmd</a> *Clone() <span class="keyword">const </span>= 0;
00214 
00215       <span class="comment">// Destructor</span>
<a name="l00216"></a><a class="code" href="classwxCmd.html#a4">00216</a>       <span class="keyword">virtual</span> ~<a class="code" href="classwxCmd.html">wxCmd</a>() {}
00217 
00218 
00219 <span class="keyword">public</span>:
00220 
00221       <span class="comment">// Add/Remove functions</span>
00222       <span class="comment">// ----------------------------</span>
00223 
<a name="l00225"></a><a class="code" href="classwxCmd.html#a5">00225</a>       <span class="keywordtype">void</span> <a class="code" href="classwxKeyBinder.html#a9">AddShortcut</a>(<span class="keyword">const</span> <a class="code" href="classwxKeyBind.html">wxKeyBind</a> &amp;key) {
00226             <span class="keywordflow">if</span> (m_nShortcuts &gt;= wxCMD_MAX_SHORTCUTS) <span class="keywordflow">return</span>;
00227             m_keyShortcut[m_nShortcuts++] = key;
00228             Update();
00229       }
00230 
<a name="l00232"></a><a class="code" href="classwxCmd.html#a6">00232</a>       <span class="keywordtype">void</span> <a class="code" href="classwxKeyBinder.html#a9">AddShortcut</a>(<span class="keywordtype">int</span> flags, <span class="keywordtype">int</span> keycode) {
00233             <span class="keywordflow">if</span> (m_nShortcuts &gt;= wxCMD_MAX_SHORTCUTS) <span class="keywordflow">return</span>;
00234             <a class="code" href="classwxKeyBind.html">wxKeyBind</a> key(flags, keycode);
00235             <a class="code" href="classwxKeyBinder.html#a9">AddShortcut</a>(key);
00236             <span class="comment">// update is called by the previous call</span>
00237       }
00238 
<a name="l00241"></a><a class="code" href="classwxCmd.html#a7">00241</a>       <span class="keywordtype">void</span> <a class="code" href="classwxKeyBinder.html#a9">AddShortcut</a>(<span class="keyword">const</span> wxString &amp;key) {
00242             <span class="keywordflow">if</span> (m_nShortcuts &gt;= wxCMD_MAX_SHORTCUTS) <span class="keywordflow">return</span>;
00243             m_keyShortcut[m_nShortcuts++] = <a class="code" href="classwxKeyBind.html">wxKeyBind</a>(key);
00244             Update();
00245       }
00246 
<a name="l00248"></a><a class="code" href="classwxCmd.html#a8">00248</a>       <span class="keywordtype">void</span> RemoveShortcut(<span class="keywordtype">int</span> n) {
00249             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=n; i &lt; m_nShortcuts; i++)      <span class="comment">// shift array left</span>
00250                   m_keyShortcut[i] = m_keyShortcut[i+1];
00251             m_nShortcuts--;
00252             Update();
00253       }
00254 
00255 
00256 
00257       <span class="comment">// Miscellaneous</span>
00258       <span class="comment">// ---------------------</span>
00259 
<a name="l00262"></a><a class="code" href="classwxCmd.html#a9">00262</a>       <span class="keywordtype">bool</span> MatchKey(<span class="keyword">const</span> wxKeyEvent &amp;ev)<span class="keyword"> const </span>{
00263             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; m_nShortcuts; i++)
00264                   <span class="keywordflow">if</span> (m_keyShortcut[i].<a class="code" href="classwxKeyBind.html#a7">MatchKey</a>(ev))
00265                         <span class="keywordflow">return</span> TRUE;
00266             <span class="keywordflow">return</span> FALSE;
00267       }
00268 
<a name="l00275"></a><a class="code" href="classwxCmd.html#a10">00275</a>       <span class="keywordtype">bool</span> IsBindTo(<span class="keyword">const</span> <a class="code" href="classwxKeyBind.html">wxKeyBind</a> &amp;key, <span class="keywordtype">int</span> *n = NULL)<span class="keyword"> const </span>{
00276             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; m_nShortcuts; i++) {
00277                   <span class="keywordflow">if</span> (m_keyShortcut[i].<a class="code" href="classwxKeyBind.html#a8">Match</a>(key)) {
00278                         <span class="keywordflow">if</span> (n) *n = i;
00279                         <span class="keywordflow">return</span> TRUE;
00280                   }
00281             }
00282             <span class="keywordflow">return</span> FALSE;
00283       }
00284 
00285 
00286 
00287       <span class="comment">// Getters</span>
00288       <span class="comment">// ---------------------</span>
00289 
<a name="l00290"></a><a class="code" href="classwxCmd.html#a11">00290</a>       <a class="code" href="classwxKeyBind.html">wxKeyBind</a> *<a class="code" href="classwxKeyBinder.html#a16">GetShortcut</a>(<span class="keywordtype">int</span> n)                    { <span class="keywordflow">return</span> &amp;m_keyShortcut[n]; }
<a name="l00291"></a><a class="code" href="classwxCmd.html#a12">00291</a>       <span class="keyword">const</span> <a class="code" href="classwxKeyBind.html">wxKeyBind</a> *<a class="code" href="classwxKeyBinder.html#a16">GetShortcut</a>(<span class="keywordtype">int</span> n)<span class="keyword"> const  </span>{ <span class="keywordflow">return</span> &amp;m_keyShortcut[n]; }
00292 
<a name="l00293"></a><a class="code" href="classwxCmd.html#a13">00293</a>       wxAcceleratorEntry GetAccelerator(<span class="keywordtype">int</span> n)<span class="keyword"> const </span>{
00294             <span class="keywordflow">return</span> wxAcceleratorEntry(<a class="code" href="classwxKeyBinder.html#a16">GetShortcut</a>(n)-&gt;GetModifiers(),
00295                   <a class="code" href="classwxKeyBinder.html#a16">GetShortcut</a>(n)-&gt;GetKeyCode(), m_nId);
00296       }
00297 
<a name="l00298"></a><a class="code" href="classwxCmd.html#a14">00298</a>       <span class="keywordtype">int</span> GetId()<span class="keyword"> const </span>{
00299             <span class="keywordflow">return</span> m_nId;
00300       }
00301 
<a name="l00302"></a><a class="code" href="classwxCmd.html#a15">00302</a>       <span class="keywordtype">int</span> GetShortcutCount()<span class="keyword"> const </span>{
00303             <span class="keywordflow">return</span> m_nShortcuts;
00304       }
00305 
<a name="l00306"></a><a class="code" href="classwxCmd.html#a16">00306</a>       wxString GetDescription()<span class="keyword"> const </span>{
00307             <span class="keywordflow">return</span> m_strDescription;
00308       }
00309 
<a name="l00310"></a><a class="code" href="classwxCmd.html#a17">00310</a>       wxString GetName()<span class="keyword"> const </span>{
00311             <span class="keywordflow">return</span> m_strName;
00312       }
00313 
<a name="l00314"></a><a class="code" href="classwxCmd.html#a18">00314</a>       wxArrayString <a class="code" href="classwxKeyBinder.html#a18">GetShortcutsList</a>()<span class="keyword"> const </span>{
00315             wxArrayString arr;
00316             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; m_nShortcuts; i++)
00317                   arr.Add(m_keyShortcut[i].GetStr());
00318             <span class="keywordflow">return</span> arr;
00319       }
00320 
00321 <span class="keyword">protected</span>:
00322 
<a name="l00325"></a><a class="code" href="classwxCmd.html#b0">00325</a>       <span class="keyword">virtual</span> <span class="keywordtype">void</span> Update() {}
00326 
00332       <span class="keyword">virtual</span> <span class="keywordtype">void</span> Exec(wxObject *obj, wxEvtHandler *client) = 0;
00333 };
00334 
00335 
00336 
00337 
<a name="l00342"></a><a class="code" href="classwxCmdArray.html">00342</a> <span class="keyword">class </span><a class="code" href="classwxCmdArray.html">wxCmdArray</a>
00343 {
<a name="l00344"></a><a class="code" href="classwxCmdArray.html#r0">00344</a>       wxArrayPtrVoid m_arr;
00345 
00346 <span class="keyword">public</span>:
<a name="l00347"></a><a class="code" href="classwxCmdArray.html#a0">00347</a>       <a class="code" href="classwxCmdArray.html">wxCmdArray</a>() {}
<a name="l00348"></a><a class="code" href="classwxCmdArray.html#a1">00348</a>       <span class="keyword">virtual</span> ~<a class="code" href="classwxCmdArray.html">wxCmdArray</a>() { Clear(); }
00349 
<a name="l00350"></a><a class="code" href="classwxCmdArray.html#a2">00350</a>       <span class="keywordtype">void</span> DeepCopy(<span class="keyword">const</span> <a class="code" href="classwxCmdArray.html">wxCmdArray</a> &amp;arr) {
00351             Clear();
00352             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; arr.<a class="code" href="classwxCmdArray.html#a6">GetCount</a>(); i++)
00353                   Add(arr.<a class="code" href="classwxCmdArray.html#a7">Item</a>(i)-&gt;<a class="code" href="classwxCmd.html#a3">Clone</a>());
00354       }
00355 
<a name="l00356"></a><a class="code" href="classwxCmdArray.html#a3">00356</a>       <span class="keywordtype">void</span> Add(<a class="code" href="classwxCmd.html">wxCmd</a> *p)                  { m_arr.Add(p); }
00357       <span class="keywordtype">void</span> Remove(<span class="keywordtype">int</span> n);
00358       <span class="keywordtype">void</span> Clear();
00359 
<a name="l00360"></a><a class="code" href="classwxCmdArray.html#a6">00360</a>       <span class="keywordtype">int</span> GetCount()<span class="keyword"> const          </span>{ <span class="keywordflow">return</span> m_arr.GetCount(); }
<a name="l00361"></a><a class="code" href="classwxCmdArray.html#a7">00361</a>       <a class="code" href="classwxCmd.html">wxCmd</a> *Item(<span class="keywordtype">int</span> n)<span class="keyword"> const      </span>{ <span class="keywordflow">return</span> (<a class="code" href="classwxCmd.html">wxCmd</a> *)m_arr.Item(n); }
00362 };
00363 
00364 
00365 
00366 
00367 
00368 <span class="comment">// Define the wxADD_KEYBINDER_SUPPORT: you should use it inside a protected</span>
00369 <span class="comment">// block of the windows which want to use the wxKeyBinder facilities</span>
00370 <span class="preprocessor">#ifdef __WXMSW__</span>
00371 <span class="preprocessor"></span>
00372       <span class="comment">// This is a virtual function used in wxMSW which can be used to allow</span>
00373       <span class="comment">// or disable the message preprocessing and thus the preprocessing of</span>
00374       <span class="comment">// keyshortcuts; to add keybinder support, the preprocessing must be</span>
00375       <span class="comment">// disabled: wxKeyBinder will care of checking the keypresses for</span>
00376       <span class="comment">// eventual hotkeys...</span>
00377 <span class="preprocessor">      #define wxADD_KEYBINDER_SUPPORT()                                                         \</span>
00378 <span class="preprocessor">            virtual bool MSWShouldPreProcessMessage(WXMSG*) { return FALSE; }</span>
00379 <span class="preprocessor"></span>
00380 <span class="preprocessor">#else</span>
00381 <span class="preprocessor"></span>
00382       <span class="comment">// the other ports doesn't use MSWShouldPreProcessMessage...</span>
<a name="l00383"></a><a class="code" href="keybinder_8h.html#a2">00383</a> <span class="preprocessor">      #define wxADD_KEYBINDER_SUPPORT()               </span><span class="comment">/* expand to nothing */</span>
00384 
00385 <span class="preprocessor">#endif</span>
00386 <span class="preprocessor"></span>
00387 
<a name="l00405"></a><a class="code" href="classwxKeyBinder.html">00405</a> <span class="keyword">class </span><a class="code" href="classwxKeyBinder.html">wxKeyBinder</a> : <span class="keyword">public</span> wxEvtHandler
00406 {
00407 <span class="keyword">protected</span>:
00408 
<a name="l00410"></a><a class="code" href="classwxKeyBinder.html#p0">00410</a>       <a class="code" href="classwxCmdArray.html">wxCmdArray</a> m_arrCmd;
00411 
<a name="l00419"></a><a class="code" href="classwxKeyBinder.html#p1">00419</a>       wxArrayPtrVoid m_arrAttachedWnd;
00420       <span class="comment">//wxWindowList m_lstAttachedWnd;          // I don't like wxList...</span>
00421 
00422 <span class="keyword">protected</span>:
00423 
00425       <span class="keywordtype">void</span> <a class="code" href="classwxKeyBinder.html#b0">OnChar</a>(wxKeyEvent &amp;event);     
00426 
00427 
<a name="l00429"></a><a class="code" href="classwxKeyBinder.html#b1">00429</a>       <span class="keywordtype">int</span> <a class="code" href="classwxKeyBinder.html#b1">FindCmd</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>)<span class="keyword"> const </span>{
00430             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; (int)<a class="code" href="classwxKeyBinder.html#p0">m_arrCmd</a>.<a class="code" href="classwxCmdArray.html#a6">GetCount</a>(); i++)
00431                   <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="classwxKeyBinder.html#p0">m_arrCmd</a>.<a class="code" href="classwxCmdArray.html#a7">Item</a>(i)-&gt;<a class="code" href="classwxCmd.html#a14">GetId</a>())
00432                         <span class="keywordflow">return</span> i;
00433             <span class="keywordflow">return</span> -1;
00434       }
00435 
<a name="l00438"></a><a class="code" href="classwxKeyBinder.html#b2">00438</a>       <span class="keywordtype">int</span> <a class="code" href="classwxKeyBinder.html#b2">FindCmdBindTo</a>(<span class="keyword">const</span> <a class="code" href="classwxKeyBind.html">wxKeyBind</a> &amp;key, <span class="keywordtype">int</span> *n = NULL)<span class="keyword"> const </span>{
00439             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; (int)<a class="code" href="classwxKeyBinder.html#p0">m_arrCmd</a>.<a class="code" href="classwxCmdArray.html#a6">GetCount</a>(); i++)
00440                   <span class="keywordflow">if</span> (<a class="code" href="classwxKeyBinder.html#p0">m_arrCmd</a>.<a class="code" href="classwxCmdArray.html#a7">Item</a>(i)-&gt;<a class="code" href="classwxCmd.html#a10">IsBindTo</a>(key, n))
00441                         <span class="keywordflow">return</span> i;
00442             <span class="keywordflow">return</span> -1;
00443       }
00444 
<a name="l00447"></a><a class="code" href="classwxKeyBinder.html#b3">00447</a>       <span class="keywordtype">int</span> <a class="code" href="classwxKeyBinder.html#b3">FindMatchingCmd</a>(<span class="keyword">const</span> wxKeyEvent &amp;key)<span class="keyword"> const </span>{
00448             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; (int)<a class="code" href="classwxKeyBinder.html#p0">m_arrCmd</a>.<a class="code" href="classwxCmdArray.html#a6">GetCount</a>(); i++)
00449                   <span class="keywordflow">if</span> (<a class="code" href="classwxKeyBinder.html#p0">m_arrCmd</a>.<a class="code" href="classwxCmdArray.html#a7">Item</a>(i)-&gt;<a class="code" href="classwxCmd.html#a9">MatchKey</a>(key))
00450                         <span class="keywordflow">return</span> i;
00451             <span class="keywordflow">return</span> -1;
00452       }
00453 
00454 
00455 <span class="keyword">public</span>:
00456 
<a name="l00457"></a><a class="code" href="classwxKeyBinder.html#a0">00457</a>       <a class="code" href="classwxKeyBinder.html#a0">wxKeyBinder</a>() {}
<a name="l00458"></a><a class="code" href="classwxKeyBinder.html#a1">00458</a>       <span class="keyword">virtual</span> <a class="code" href="classwxKeyBinder.html#a1">~wxKeyBinder</a>() { <a class="code" href="classwxKeyBinder.html#a6">DetachAll</a>(); }
00459 
00460 
00461 
<a name="l00463"></a><a class="code" href="classwxKeyBinder.html#a2">00463</a>       <span class="keywordtype">void</span> <a class="code" href="classwxKeyBinder.html#a2">DeepCopy</a>(<span class="keyword">const</span> <a class="code" href="classwxKeyBinder.html">wxKeyBinder</a> *p) {
00464             <a class="code" href="classwxKeyBinder.html#p0">m_arrCmd</a>.<a class="code" href="classwxCmdArray.html#a2">DeepCopy</a>(p-&gt;<a class="code" href="classwxKeyBinder.html#p0">m_arrCmd</a>);
00465       }
00466 
<a name="l00468"></a><a class="code" href="classwxKeyBinder.html#a3">00468</a>       <span class="keywordtype">void</span> <a class="code" href="classwxKeyBinder.html#a3">Reset</a>() {
00469             <a class="code" href="classwxKeyBinder.html#p0">m_arrCmd</a>.<a class="code" href="classwxCmdArray.html#a5">Clear</a>();
00470       }
00471 
00472 
<a name="l00474"></a><a class="code" href="classwxKeyBinder.html#a4">00474</a>       <span class="keywordtype">void</span> <a class="code" href="classwxKeyBinder.html#a4">Attach</a>(wxWindow *p) {
00475             <span class="keywordflow">if</span> (<a class="code" href="classwxKeyBinder.html#p1">m_arrAttachedWnd</a>.Index((<span class="keywordtype">void</span> *)p) != wxNOT_FOUND)
00476                   <span class="keywordflow">return</span>;           <span class="comment">// already attached !!!</span>
00477             p-&gt;PushEventHandler(<span class="keyword">this</span>);
00478             <a class="code" href="classwxKeyBinder.html#p1">m_arrAttachedWnd</a>.<a class="code" href="classwxCmdArray.html#a3">Add</a>((<span class="keywordtype">void</span>*)p);
00479       }
00480 
<a name="l00482"></a><a class="code" href="classwxKeyBinder.html#a5">00482</a>       <span class="keywordtype">void</span> <a class="code" href="classwxKeyBinder.html#a5">Detach</a>(wxWindow *p) {
00483             <span class="keywordflow">if</span> (<a class="code" href="classwxKeyBinder.html#p1">m_arrAttachedWnd</a>.Index((<span class="keywordtype">void</span> *)p) == wxNOT_FOUND)
00484                   <span class="keywordflow">return</span>;           <span class="comment">// this is not attached...</span>
00485             p-&gt;RemoveEventHandler(<span class="keyword">this</span>);
00486             <a class="code" href="classwxKeyBinder.html#p1">m_arrAttachedWnd</a>.<a class="code" href="classwxCmdArray.html#a4">Remove</a>((<span class="keywordtype">void</span>*)p);
00487       }
00488 
<a name="l00490"></a><a class="code" href="classwxKeyBinder.html#a6">00490</a>       <span class="keywordtype">void</span> <a class="code" href="classwxKeyBinder.html#a6">DetachAll</a>() {
00491             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; (int)<a class="code" href="classwxKeyBinder.html#p1">m_arrAttachedWnd</a>.GetCount(); i++)
00492                   ((wxWindow *)<a class="code" href="classwxKeyBinder.html#p1">m_arrAttachedWnd</a>.Item(i))-&gt;RemoveEventHandler(<span class="keyword">this</span>);
00493             <a class="code" href="classwxKeyBinder.html#p1">m_arrAttachedWnd</a>.<a class="code" href="classwxCmdArray.html#a5">Clear</a>();
00494       }
00495 
00498       <span class="keywordtype">void</span> <a class="code" href="classwxKeyBinder.html#a7">ImportMenuBarCmd</a>(wxMenuBar *p);
00499 
00500 
00501 
00502       <span class="comment">// Add functions</span>
00503       <span class="comment">// -------------------</span>
00504 
<a name="l00505"></a><a class="code" href="classwxKeyBinder.html#a8">00505</a>       <span class="keywordtype">void</span> <a class="code" href="classwxKeyBinder.html#a8">AddCmd</a>(<a class="code" href="classwxCmd.html">wxCmd</a> *p) {
00506             <a class="code" href="classwxKeyBinder.html#p0">m_arrCmd</a>.<a class="code" href="classwxCmdArray.html#a3">Add</a>(p);
00507       }
00508 
<a name="l00509"></a><a class="code" href="classwxKeyBinder.html#a9">00509</a>       <span class="keywordtype">void</span> <a class="code" href="classwxKeyBinder.html#a9">AddShortcut</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keyword">const</span> wxString &amp;key) {
00510             <a class="code" href="classwxCmd.html">wxCmd</a> *p = <a class="code" href="classwxKeyBinder.html#a14">GetCmd</a>(<span class="keywordtype">id</span>);
00511             <span class="keywordflow">if</span> (p) p-&gt;<a class="code" href="classwxCmd.html#a5">AddShortcut</a>(key);
00512       }
00513 
<a name="l00514"></a><a class="code" href="classwxKeyBinder.html#a10">00514</a>       <span class="keywordtype">void</span> <a class="code" href="classwxKeyBinder.html#a9">AddShortcut</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keyword">const</span> <a class="code" href="classwxKeyBind.html">wxKeyBind</a> &amp;key) {
00515             <a class="code" href="classwxCmd.html">wxCmd</a> *p = <a class="code" href="classwxKeyBinder.html#a14">GetCmd</a>(<span class="keywordtype">id</span>);
00516             <span class="keywordflow">if</span> (p) p-&gt;<a class="code" href="classwxCmd.html#a5">AddShortcut</a>(key);
00517       }
00518 
00519 
00520 
00521       <span class="comment">// Getters</span>
00522       <span class="comment">// -------------------</span>
00523 
<a name="l00524"></a><a class="code" href="classwxKeyBinder.html#a11">00524</a>       <a class="code" href="classwxCmdArray.html">wxCmdArray</a> *<a class="code" href="classwxKeyBinder.html#a11">GetArray</a>()                          { <span class="keywordflow">return</span> &amp;m_arrCmd;     }
<a name="l00525"></a><a class="code" href="classwxKeyBinder.html#a12">00525</a>       <span class="keyword">const</span> <a class="code" href="classwxCmdArray.html">wxCmdArray</a> *<a class="code" href="classwxKeyBinder.html#a11">GetArray</a>()<span class="keyword"> const        </span>{ <span class="keywordflow">return</span> &amp;m_arrCmd; }
00526 
<a name="l00527"></a><a class="code" href="classwxKeyBinder.html#a13">00527</a>       <a class="code" href="classwxCmd.html">wxCmd</a> *<a class="code" href="classwxKeyBinder.html#a13">GetMatchingCmd</a>(<span class="keyword">const</span> wxKeyEvent &amp;key)<span class="keyword"> const </span>{
00528             <span class="keywordtype">int</span> i = <a class="code" href="classwxKeyBinder.html#b3">FindMatchingCmd</a>(key);
00529             <span class="keywordflow">if</span> (i != -1)
00530                   <span class="keywordflow">return</span> <a class="code" href="classwxKeyBinder.html#p0">m_arrCmd</a>.<a class="code" href="classwxCmdArray.html#a7">Item</a>(i);
00531             <span class="keywordflow">return</span> NULL;
00532       }
00533 
<a name="l00534"></a><a class="code" href="classwxKeyBinder.html#a14">00534</a>       <a class="code" href="classwxCmd.html">wxCmd</a> *<a class="code" href="classwxKeyBinder.html#a14">GetCmd</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>)<span class="keyword"> const </span>{
00535             <span class="keywordtype">int</span> i = <a class="code" href="classwxKeyBinder.html#b1">FindCmd</a>(<span class="keywordtype">id</span>);
00536             <span class="keywordflow">if</span> (i != -1)
00537                   <span class="keywordflow">return</span> <a class="code" href="classwxKeyBinder.html#p0">m_arrCmd</a>.<a class="code" href="classwxCmdArray.html#a7">Item</a>(i);
00538             <span class="keywordflow">return</span> NULL;
00539       }
00540 
<a name="l00541"></a><a class="code" href="classwxKeyBinder.html#a15">00541</a>       <a class="code" href="classwxCmd.html">wxCmd</a> *<a class="code" href="classwxKeyBinder.html#a15">GetCmdBindTo</a>(<span class="keyword">const</span> wxString &amp;key, <span class="keywordtype">int</span> *n = NULL)<span class="keyword"> const </span>{
00542             <span class="keywordtype">int</span> i = <a class="code" href="classwxKeyBinder.html#b2">FindCmdBindTo</a>(<a class="code" href="classwxKeyBind.html">wxKeyBind</a>(key), n);
00543             <span class="keywordflow">if</span> (i != -1)
00544                   <span class="keywordflow">return</span> <a class="code" href="classwxKeyBinder.html#p0">m_arrCmd</a>.<a class="code" href="classwxCmdArray.html#a7">Item</a>(i);
00545             <span class="keywordflow">return</span> NULL;
00546       }
00547 
<a name="l00548"></a><a class="code" href="classwxKeyBinder.html#a16">00548</a>       <a class="code" href="classwxKeyBind.html">wxKeyBind</a> *<a class="code" href="classwxKeyBinder.html#a16">GetShortcut</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">int</span> n)<span class="keyword"> const </span>{
00549             <a class="code" href="classwxCmd.html">wxCmd</a> *p = <a class="code" href="classwxKeyBinder.html#a14">GetCmd</a>(<span class="keywordtype">id</span>);
00550             <span class="keywordflow">if</span> (p) <span class="keywordflow">return</span> p-&gt;<a class="code" href="classwxCmd.html#a11">GetShortcut</a>(n);
00551             <span class="keywordflow">return</span> NULL;
00552       }
00553 
<a name="l00554"></a><a class="code" href="classwxKeyBinder.html#a17">00554</a>       wxString <a class="code" href="classwxKeyBinder.html#a17">GetShortcutStr</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">int</span> n)<span class="keyword"> const </span>{
00555             <a class="code" href="classwxKeyBind.html">wxKeyBind</a> *p = <a class="code" href="classwxKeyBinder.html#a16">GetShortcut</a>(<span class="keywordtype">id</span>, n);
00556             <span class="keywordflow">if</span> (p) <span class="keywordflow">return</span> p-&gt;<a class="code" href="classwxKeyBind.html#a11">GetStr</a>();
00557             <span class="keywordflow">return</span> wxEmptyString;
00558       }
00559 
<a name="l00560"></a><a class="code" href="classwxKeyBinder.html#a18">00560</a>       wxArrayString <a class="code" href="classwxKeyBinder.html#a18">GetShortcutsList</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>)<span class="keyword"> const </span>{
00561             <a class="code" href="classwxCmd.html">wxCmd</a> *p = <a class="code" href="classwxKeyBinder.html#a14">GetCmd</a>(<span class="keywordtype">id</span>);
00562             <span class="keywordflow">if</span> (p) <span class="keywordflow">return</span> p-&gt;<a class="code" href="classwxCmd.html#a18">GetShortcutsList</a>();
00563             <span class="keywordflow">return</span> wxArrayString();
00564       }
00565 
<a name="l00566"></a><a class="code" href="classwxKeyBinder.html#a19">00566</a>       wxArrayPtrVoid *<a class="code" href="classwxKeyBinder.html#a19">GetAttachedWndArr</a>()                         { <span class="keywordflow">return</span> &amp;m_arrAttachedWnd;   }
<a name="l00567"></a><a class="code" href="classwxKeyBinder.html#a20">00567</a>       <span class="keyword">const</span> wxArrayPtrVoid *<a class="code" href="classwxKeyBinder.html#a19">GetAttachedWndArr</a>()<span class="keyword"> const       </span>{ <span class="keywordflow">return</span> &amp;m_arrAttachedWnd;   }
00568 
00569 
00570 <span class="keyword">private</span>:
00571       DECLARE_CLASS(<a class="code" href="classwxKeyBinder.html">wxKeyBinder</a>)
00572       DECLARE_EVENT_TABLE()
00573 };
00574 
00575 
00576 
00577 
00578 
<a name="l00581"></a><a class="code" href="classwxKeyProfile.html">00581</a> class <a class="code" href="classwxKeyProfile.html">wxKeyProfile</a> : public <a class="code" href="classwxKeyBinder.html">wxKeyBinder</a>
00582 {
00583 <span class="keyword">protected</span>:
00584       
<a name="l00586"></a><a class="code" href="classwxKeyProfile.html#p0">00586</a>       wxString m_strName;
00587 
<a name="l00589"></a><a class="code" href="classwxKeyProfile.html#p1">00589</a>       wxString m_strDescription;
00590 
00591 <span class="keyword">public</span>:
<a name="l00592"></a><a class="code" href="classwxKeyProfile.html#a0">00592</a>       <a class="code" href="classwxKeyProfile.html">wxKeyProfile</a>(<span class="keyword">const</span> wxString &amp;name = wxEmptyString, 
00593                         <span class="keyword">const</span> wxString &amp;desc = wxEmptyString) 
00594             : m_strName(name), m_strDescription(desc) {}
<a name="l00595"></a><a class="code" href="classwxKeyProfile.html#a1">00595</a>       <span class="keyword">virtual</span> ~<a class="code" href="classwxKeyProfile.html">wxKeyProfile</a>() {}
00596 
00597 
<a name="l00598"></a><a class="code" href="classwxKeyProfile.html#a2">00598</a>       <span class="keywordtype">void</span> SetName(<span class="keyword">const</span> wxString &amp;name) { m_strName=name; }
<a name="l00599"></a><a class="code" href="classwxKeyProfile.html#a3">00599</a>       <span class="keywordtype">void</span> SetDesc(<span class="keyword">const</span> wxString &amp;str)  { m_strDescription=str; }
00600 
<a name="l00601"></a><a class="code" href="classwxKeyProfile.html#a4">00601</a>       wxString GetName()<span class="keyword"> const            </span>{ <span class="keywordflow">return</span> m_strName; }
<a name="l00602"></a><a class="code" href="classwxKeyProfile.html#a5">00602</a>       wxString GetDesc()<span class="keyword"> const            </span>{ <span class="keywordflow">return</span> m_strDescription; }
00603 };
00604 
00605 
00606 
00607 
00608 
<a name="l00618"></a><a class="code" href="classwxKeyMonitorTextCtrl.html">00618</a> <span class="keyword">class </span><a class="code" href="classwxKeyMonitorTextCtrl.html">wxKeyMonitorTextCtrl</a> : <span class="keyword">public</span> wxTextCtrl
00619 {
00620 <span class="keyword">public</span>:
<a name="l00621"></a><a class="code" href="classwxKeyMonitorTextCtrl.html#a0">00621</a>       <a class="code" href="classwxKeyMonitorTextCtrl.html">wxKeyMonitorTextCtrl</a>(
00622             wxWindow* parent,
00623             wxWindowID <span class="keywordtype">id</span>,
00624             <span class="keyword">const</span> wxString&amp; value = <span class="stringliteral">""</span>,
00625             <span class="keyword">const</span> wxPoint&amp; pos = wxDefaultPosition,
00626             <span class="keyword">const</span> wxSize&amp; size = wxDefaultSize,
00627             <span class="keywordtype">long</span> style = wxTE_PROCESS_ENTER,
00628             <span class="keyword">const</span> wxValidator&amp; validator = wxDefaultValidator,
00629             <span class="keyword">const</span> wxString&amp; name = wxTextCtrlNameStr) :
00630             wxTextCtrl(parent, id, value, pos, size, style, validator, name) {}
00631 
<a name="l00632"></a><a class="code" href="classwxKeyMonitorTextCtrl.html#a1">00632</a>       <span class="keyword">virtual</span> ~<a class="code" href="classwxKeyMonitorTextCtrl.html">wxKeyMonitorTextCtrl</a>() {}
00633 
00634 <span class="keyword">public</span>:
00635 
00638       <span class="keywordtype">void</span> OnKey(wxKeyEvent &amp;);
00639 
<a name="l00641"></a><a class="code" href="classwxKeyMonitorTextCtrl.html#a3">00641</a>       <span class="keywordtype">bool</span> IsValidKeyComb()<span class="keyword"> const </span>{
00642             <span class="keywordflow">return</span> !GetValue().IsEmpty() &amp;&amp; GetValue().Last() != <span class="charliteral">'+'</span>;
00643       }
00644 
00645 <span class="keyword">private</span>:
00646       DECLARE_CLASS(<a class="code" href="classwxKeyMonitorTextCtrl.html">wxKeyMonitorTextCtrl</a>)
00647       DECLARE_EVENT_TABLE()
00648 };
00649 
00650 
00651 
00652 
00653 
00654 
00655 <span class="comment">// IDs used by wxKeyConfigPanel</span>
<a name="l00656"></a><a class="code" href="keybinder_8h.html#a3">00656</a> #define KEYBINDER_BASEID                              30000       <span class="comment">// start from this value</span>
00657 
<a name="l00658"></a><a class="code" href="keybinder_8h.html#a4">00658</a> #define KEYBINDER_COMMANDS_BOX_ID               KEYBINDER_BASEID+1
<a name="l00659"></a><a class="code" href="keybinder_8h.html#a5">00659</a> #define KEYBINDER_BINDINGS_BOX_ID               KEYBINDER_BASEID+2
<a name="l00660"></a><a class="code" href="keybinder_8h.html#a6">00660</a> #define KEYBINDER_KEY_FIELD_ID                        KEYBINDER_BASEID+3
<a name="l00661"></a><a class="code" href="keybinder_8h.html#a7">00661</a> #define KEYBINDER_ASSIGN_KEY_ID                       KEYBINDER_BASEID+4
<a name="l00662"></a><a class="code" href="keybinder_8h.html#a8">00662</a> #define KEYBINDER_REMOVE_KEY_ID                       KEYBINDER_BASEID+5
<a name="l00663"></a><a class="code" href="keybinder_8h.html#a9">00663</a> #define KEYBINDER_KEYPROFILES_ID                KEYBINDER_BASEID+6
00664 
<a name="l00665"></a><a class="code" href="keybinder_8h.html#a10">00665</a> #define KEYBINDER_MAX_KEYPROFILES               16
00666 
00667 
00668 
<a name="l00700"></a><a class="code" href="classwxKeyConfigPanel.html">00700</a> class <a class="code" href="classwxKeyConfigPanel.html">wxKeyConfigPanel</a> : public wxPanel
00701 {
00702 <span class="keyword">public</span>:
00703 
00705       <a class="code" href="classwxKeyConfigPanel.html">wxKeyConfigPanel</a>(wxWindow* parent,
00706             <a class="code" href="classwxKeyProfile.html">wxKeyProfile</a> *pBinder,              <span class="comment">// the key binder to edit (can be NULL)</span>
00707             <span class="keywordtype">bool</span> showApplyBtn = FALSE,
00708             wxWindowID <span class="keywordtype">id</span> = -1, 
00709             <span class="keyword">const</span> wxPoint&amp; pos = wxDefaultPosition,
00710             <span class="keyword">const</span> wxSize&amp; size = wxDefaultSize, 
00711             <span class="keywordtype">long</span> style = wxTAB_TRAVERSAL,
00712             <span class="keyword">const</span> wxString&amp; name = <span class="stringliteral">"wxKeyConfigPanel"</span>);
00713 
<a name="l00714"></a><a class="code" href="classwxKeyConfigPanel.html#a1">00714</a>       <span class="keyword">virtual</span> ~<a class="code" href="classwxKeyConfigPanel.html">wxKeyConfigPanel</a>() {}
00715 
00716 
00717 <span class="keyword">public</span>:           <span class="comment">// import commands</span>
00718 
00725       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classwxKeyBinder.html#a7">ImportMenuBarCmd</a>(wxMenuBar *, 
00726                                                 <span class="keyword">const</span> wxString &amp;rootname = <span class="stringliteral">"Menu bar"</span>);
00727 
00734       <span class="keyword">virtual</span> <span class="keywordtype">void</span> ImportKeyProfileCmd(<span class="keywordtype">int</span> n, <span class="keyword">const</span> wxString &amp;rootname = <span class="stringliteral">"Commands"</span>);
00735 
00736 
00737 <span class="keyword">public</span>:           <span class="comment">// keyprofile utilities</span>
00738 
00746       <span class="keyword">virtual</span> <span class="keywordtype">void</span> AddProfile(<a class="code" href="classwxKeyProfile.html">wxKeyProfile</a> *p, <span class="keywordtype">bool</span> bImport = FALSE, 
00747                                           <span class="keyword">const</span> wxString &amp;rootname = <span class="stringliteral">"Commands"</span>);
00748 
<a name="l00751"></a><a class="code" href="classwxKeyConfigPanel.html#a5">00751</a>       <a class="code" href="classwxKeyProfile.html">wxKeyProfile</a> *GetProfile(<span class="keywordtype">int</span> n)<span class="keyword"> const</span>
00752 <span class="keyword">            </span>{ wxASSERT(m_pKeyProfiles); <span class="keywordflow">return</span> (<a class="code" href="classwxKeyProfile.html">wxKeyProfile</a> *)m_pKeyProfiles-&gt;GetClientData(n); }
00753 
<a name="l00755"></a><a class="code" href="classwxKeyConfigPanel.html#a6">00755</a>       <a class="code" href="classwxKeyProfile.html">wxKeyProfile</a> *GetSelProfile()<span class="keyword"> const</span>
00756 <span class="keyword">            </span>{ <span class="keywordtype">int</span> n=GetSelProfileIdx(); <span class="keywordflow">return</span> (n &gt;= 0 ? GetProfile(n) : NULL); }
00757 
<a name="l00762"></a><a class="code" href="classwxKeyConfigPanel.html#a7">00762</a>       <span class="keywordtype">int</span> GetSelProfileIdx()<span class="keyword"> const</span>
00763 <span class="keyword">            </span>{ wxASSERT(m_pKeyProfiles); <span class="keywordflow">return</span> m_pKeyProfiles-&gt;GetSelection(); }
00764 
<a name="l00767"></a><a class="code" href="classwxKeyConfigPanel.html#a8">00767</a>       wxComboBox *GetProfiles()<span class="keyword"> const</span>
00768 <span class="keyword">            </span>{ <span class="keywordflow">return</span> m_pKeyProfiles; }
00769 
00770 
00771 <span class="keyword">public</span>:           <span class="comment">// miscellaneous</span>
00772 
00776       <span class="keyword">virtual</span> <span class="keywordtype">void</span> ApplyChanges();
00777 
00781       <span class="keywordtype">void</span> EnableKeyProfiles(<span class="keywordtype">bool</span> bEnable = TRUE);
00782 
<a name="l00785"></a><a class="code" href="classwxKeyConfigPanel.html#a11">00785</a>       <span class="keywordtype">void</span> DisableKeyProfiles()
00786             { EnableKeyProfiles(FALSE); }
00787 
00788 
00789 <span class="keyword">protected</span>:        <span class="comment">// event handlers</span>
00790 
00792       <span class="keywordtype">void</span> OnIdle(wxIdleEvent &amp;event);
00793 
00794       <span class="keywordtype">void</span> OnCommandSelected(wxTreeEvent &amp;event);
00795       <span class="keywordtype">void</span> OnBindingSelected(wxCommandEvent &amp;event);
00796       <span class="keywordtype">void</span> OnProfileSelected(wxCommandEvent &amp;event);
00797 
00798       <span class="keywordtype">void</span> OnApplyChanges(wxCommandEvent &amp;event);
00799       <span class="keywordtype">void</span> OnAssignKey(wxCommandEvent &amp;event);
00800       <span class="keywordtype">void</span> OnRemoveKey(wxCommandEvent &amp;event);
00801 
00803       <span class="keywordtype">void</span> OnKeyPressed(wxCommandEvent &amp;event);
00804 
00805 
00806 <span class="keyword">protected</span>:        <span class="comment">// utilities</span>
00807 
00808       <span class="keyword">virtual</span> <span class="keywordtype">void</span> UpdateButtons();
00809       <span class="keyword">virtual</span> <span class="keywordtype">void</span> UpdateDesc();    
00810       <span class="keyword">virtual</span> <span class="keywordtype">void</span> FillInBindings();
00811       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classwxKeyBinder.html#a3">Reset</a>();
00812       <span class="keyword">virtual</span> <span class="keywordtype">void</span> AddRootIfMissing(<span class="keyword">const</span> wxString &amp;rootname);
00813 
00814 
00816       wxTreeItemId GetSelCmdId();
00817 
00819       wxString GetSelCmdStr();
00820 
00822       <a class="code" href="classwxCmd.html">wxCmd</a> *GetSelCmd();
00823 
00824 
00825 <span class="keyword">protected</span>:        <span class="comment">// members</span>
00826 
<a name="l00828"></a><a class="code" href="classwxKeyConfigPanel.html#p0">00828</a>       <a class="code" href="classwxKeyMonitorTextCtrl.html">wxKeyMonitorTextCtrl</a> *m_pKeyField;
00829 
<a name="l00832"></a><a class="code" href="classwxKeyConfigPanel.html#p1">00832</a>       <span class="keywordtype">bool</span> m_bEnableKeyProfiles;
00833 
<a name="l00835"></a><a class="code" href="classwxKeyConfigPanel.html#p2">00835</a>       <a class="code" href="classwxCmd.html">wxCmd</a> *m_pCurrCmd;
00836 
<a name="l00839"></a><a class="code" href="classwxKeyConfigPanel.html#p3">00839</a>       <a class="code" href="classwxKeyBinder.html">wxKeyBinder</a> m_kBinder;
00840 
00841 <span class="keyword">protected</span>:        <span class="comment">// the subwindows of this dialog</span>
00842 
<a name="l00843"></a><a class="code" href="classwxKeyConfigPanel.html#p4">00843</a>       wxButton *m_pAssignBtn;
<a name="l00844"></a><a class="code" href="classwxKeyConfigPanel.html#p5">00844</a>       wxButton *m_pRemoveBtn;
00845 
<a name="l00846"></a><a class="code" href="classwxKeyConfigPanel.html#p6">00846</a>       wxTreeCtrl *m_pCommands;
<a name="l00847"></a><a class="code" href="classwxKeyConfigPanel.html#p7">00847</a>       wxListBox  *m_pBindings;
00848 
<a name="l00849"></a><a class="code" href="classwxKeyConfigPanel.html#p8">00849</a>       wxComboBox *m_pKeyProfiles;
<a name="l00850"></a><a class="code" href="classwxKeyConfigPanel.html#p9">00850</a>       wxSizer *m_pKeyProfilesSizer;
00851 
00852       <span class="comment">//wxTextCtrl  *m_pDescLabel;  // we won't allow description editing !!</span>
<a name="l00853"></a><a class="code" href="classwxKeyConfigPanel.html#p10">00853</a>       wxStaticText *m_pDescLabel;
<a name="l00854"></a><a class="code" href="classwxKeyConfigPanel.html#p11">00854</a>       wxStaticText *m_pCurrCmdField;
00855 
00856 <span class="keyword">private</span>:
00857       DECLARE_CLASS(<a class="code" href="classwxKeyConfigPanel.html">wxKeyConfigPanel</a>)
00858       DECLARE_EVENT_TABLE()
00859 };
00860 
00861 
00862 
00863 #endif <span class="comment">// __KEYBINDER_G__</span>
00864 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Mon Dec 27 16:23:29 2004 for Keybinder by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
