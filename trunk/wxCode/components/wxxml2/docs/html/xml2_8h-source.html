<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>wxXml2: xml2.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>xml2.h</h1><a href="xml2_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 <span class="comment">// Name:        xml2.h</span>
00003 <span class="comment">// Purpose:     libxml2 wrappers</span>
00004 <span class="comment">// Author:      Francesco Montorsi (original design based on EXPAXT by Vaclav Slavik)</span>
00005 <span class="comment">// Created:     2000/03/05</span>
00006 <span class="comment">// RCS-ID:      </span>
00007 <span class="comment">// Copyright:   (c) 2000 Vaclav Slavik and (c) 2003 Francesco Montorsi</span>
00008 <span class="comment">// Licence:     wxWidgets licence</span>
00010 <span class="comment"></span>
00011 
00012 <span class="preprocessor">#ifndef _WX_XML2_H_</span>
00013 <span class="preprocessor"></span><span class="preprocessor">#define _WX_XML2_H_</span>
00014 <span class="preprocessor"></span>
00015 <span class="comment">// optimization for GCC</span>
00016 <span class="preprocessor">#if defined(__GNUG__) &amp;&amp; !defined(__APPLE__)</span>
00017 <span class="preprocessor"></span><span class="preprocessor">#pragma interface "xml2.h"</span>
00018 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00019 <span class="preprocessor"></span>
00020 <span class="comment">// wxWidgets headers</span>
00021 <span class="preprocessor">#include "wx/string.h"</span>
00022 <span class="preprocessor">#include "wx/wfstream.h"</span>
00023 <span class="preprocessor">#include "wx/filename.h"</span>
00024 
00025 
00026 <span class="comment">// Libxml2 headers: these classes wraps only libxml2 elements. You cannot</span>
00027 <span class="comment">// use them without libxml2 !!!!!</span>
00028 <span class="comment">//</span>
00029 <span class="comment">// To add libxml2 to your project:</span>
00030 <span class="comment">//   1) install libxml2 library binaries or compile them</span>
00031 <span class="comment">//      (you can find all the info at http://xmlsoft.org)</span>
00032 <span class="comment">//   2) add the include and library paths to the compiler</span>
00033 <span class="comment">//   3) links your progrma with the 'libxml2.lib' </span>
00034 <span class="comment">//      (and 'iconv.lib' under Win32)</span>
00035 <span class="preprocessor">#include &lt;libxml/xmlmemory.h&gt;</span>
00036 <span class="preprocessor">#include &lt;libxml/parser.h&gt;</span>
00037 
00038 
00039 <span class="preprocessor">#ifdef WXXMLISDLL</span>
00040 <span class="preprocessor"></span><span class="comment">// if building DLL, then WX*XML*DLLEXPORT=WXDLLEXPORT...</span>
00041 <span class="preprocessor">#define WXXMLDLLEXPORT          WXDLLEXPORT</span>
00042 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00043 <span class="preprocessor"></span><span class="comment">// ...otherwise </span>
<a name="l00044"></a><a class="code" href="xml2_8h.html#a0">00044</a> <span class="preprocessor">#define WXXMLDLLEXPORT</span>
00045 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00046 <span class="preprocessor"></span>
00047 <span class="comment">// these are required because the compiler must know about their existence</span>
<a name="l00048"></a><a class="code" href="xml2_8h.html#a2">00048</a> <span class="keyword">class </span><a class="code" href="xml2_8h.html#a0">WXXMLDLLEXPORT</a> <a class="code" href="xml2_8h.html#a2">wxXml2Node</a>;
<a name="l00049"></a><a class="code" href="xml2_8h.html#a3">00049</a> <span class="keyword">class </span><a class="code" href="xml2_8h.html#a0">WXXMLDLLEXPORT</a> <a class="code" href="xml2_8h.html#a3">wxXml2Property</a>;
<a name="l00050"></a><a class="code" href="xml2_8h.html#a4">00050</a> <span class="keyword">class </span><a class="code" href="xml2_8h.html#a0">WXXMLDLLEXPORT</a> <a class="code" href="xml2_8h.html#a4">wxXml2Namespace</a>;
<a name="l00051"></a><a class="code" href="xml2_8h.html#a5">00051</a> <span class="keyword">class </span><a class="code" href="xml2_8h.html#a0">WXXMLDLLEXPORT</a> <a class="code" href="xml2_8h.html#a5">wxXml2Document</a>;
00052 
00053 
00054 <span class="comment">// this macro converts from wxStrings to xmlChars</span>
<a name="l00055"></a><a class="code" href="xml2_8h.html#a1">00055</a> <span class="preprocessor">#define WX2XML(str)             ((xmlChar *)str.mb_str(wxConvUTF8))</span>
00056 <span class="preprocessor"></span>
00057 
<a name="l00061"></a><a class="code" href="xml2_8h.html#a19">00061</a> <span class="keyword">enum</span> <a class="code" href="xml2_8h.html#a19">wxXml2NodeType</a>
00062 {
00063     <span class="comment">// note: values are synchronized with xmlElementType from libxml2 2.5.x</span>
00064 
00074     <a class="code" href="xml2_8h.html#a19a10">wxXML_ELEMENT_NODE</a> =                1,
00075 
00077     <a class="code" href="xml2_8h.html#a19a11">wxXML_TEXT_NODE</a> =                   3,
00078 
00082         <a class="code" href="xml2_8h.html#a19a12">wxXML_CDATA_SECTION_NODE</a> =      4,
00083 
00089         <a class="code" href="xml2_8h.html#a19a13">wxXML_ENTITY_REF_NODE</a> =         5,
00090 
00095         <a class="code" href="xml2_8h.html#a19a14">wxXML_PI_NODE</a> =                         7,
00096 
00097     <a class="code" href="xml2_8h.html#a19a15">wxXML_COMMENT_NODE</a> =                8,              
00098     <a class="code" href="xml2_8h.html#a19a16">wxXML_DOCUMENT_NODE</a> =               9,              
00099     <a class="code" href="xml2_8h.html#a19a17">wxXML_HTML_DOCUMENT_NODE</a> =  13,     
00100 
00103         <a class="code" href="xml2_8h.html#a19a18">wxXML_DTD_NODE</a> =                        14,
00104 };
00105 
00106 
00107 
00108 <span class="comment">// global instances of empty objects</span>
<a name="l00109"></a><a class="code" href="xml2_8h.html#a6">00109</a> <span class="keyword">extern</span> <a class="code" href="xml2_8h.html#a2">wxXml2Node</a> <a class="code" href="xml2_8cpp.html#a2">wxXml2EmptyNode</a>;
<a name="l00110"></a><a class="code" href="xml2_8h.html#a7">00110</a> <span class="keyword">extern</span> <a class="code" href="xml2_8h.html#a3">wxXml2Property</a> <a class="code" href="xml2_8cpp.html#a3">wxXml2EmptyProperty</a>;
<a name="l00111"></a><a class="code" href="xml2_8h.html#a8">00111</a> <span class="keyword">extern</span> <a class="code" href="xml2_8h.html#a4">wxXml2Namespace</a> <a class="code" href="xml2_8cpp.html#a4">wxXml2EmptyNamespace</a>;
<a name="l00112"></a><a class="code" href="xml2_8h.html#a9">00112</a> <span class="keyword">extern</span> <a class="code" href="xml2_8h.html#a5">wxXml2Document</a> <a class="code" href="xml2_8cpp.html#a1">wxXml2EmptyDoc</a>;
00113 
00114 
00115 
<a name="l00119"></a><a class="code" href="classwxXml2Property.html">00119</a> <span class="keyword">class </span><a class="code" href="xml2_8h.html#a0">WXXMLDLLEXPORT</a> <a class="code" href="xml2_8h.html#a3">wxXml2Property</a> : <span class="keyword">public</span> wxObject
00120 {
00121         DECLARE_DYNAMIC_CLASS(<a class="code" href="xml2_8h.html#a3">wxXml2Property</a>)
00122 
00123         
00124         xmlAttr *m_attr;
00125 
00127         <span class="keywordtype">void</span> Destroy() {
00128                 <span class="keywordflow">if</span> (m_attr) xmlRemoveProp(m_attr);
00129                 m_attr = NULL;
00130         }
00131 
00132 
00133 <span class="keyword">public</span>:
00134 
<a name="l00136"></a><a class="code" href="classwxXml2Property.html#a0">00136</a>         <a class="code" href="xml2_8h.html#a3">wxXml2Property</a>() : m_attr(NULL) {}
00137 
<a name="l00139"></a><a class="code" href="classwxXml2Property.html#a1">00139</a>     <a class="code" href="xml2_8h.html#a3">wxXml2Property</a>(<span class="keyword">const</span> wxString &amp;name, 
00140                                         <span class="keyword">const</span> wxString &amp;value,
00141                                         wxXml2Node &amp;owner = wxXml2EmptyNode) : m_attr(NULL) { 
00142                 Create(name, value, owner); 
00143         }
00144 
<a name="l00146"></a><a class="code" href="classwxXml2Property.html#a2">00146</a>         <a class="code" href="xml2_8h.html#a3">wxXml2Property</a>(xmlAttr *pattr) { 
00147                 m_attr = pattr; 
00148         }
00149 
<a name="l00151"></a><a class="code" href="classwxXml2Property.html#a3">00151</a>         <span class="keyword">virtual</span> ~<a class="code" href="xml2_8h.html#a3">wxXml2Property</a>() {
00152                 <span class="keywordflow">if</span> (IsUnlinked()) {
00153                         <span class="comment">// if we do not free this property's memory here, nothing</span>
00154                         <span class="comment">// will never do...</span>
00155                         Destroy();
00156                 } <span class="keywordflow">else</span> {
00157                         <span class="comment">// the memory associated with this property will be freed</span>
00158                         <span class="comment">// by the node which owns this object</span>
00159                 }
00160         }
00161 
00162 
00165         <span class="keywordtype">bool</span> operator==(<span class="keyword">const</span> wxXml2Property &amp;p);
00166         
<a name="l00168"></a><a class="code" href="classwxXml2Property.html#a5">00168</a>         <span class="keywordtype">bool</span> operator!=(<span class="keyword">const</span> wxXml2Property &amp;p) { <span class="keywordflow">return</span> !(*<span class="keyword">this</span> == p); }
00169 
00171         <span class="keywordtype">void</span> Create(<span class="keyword">const</span> wxString &amp;name, 
00172                                 <span class="keyword">const</span> wxString &amp;value,
00173                                 wxXml2Node &amp;owner = wxXml2EmptyNode);
00174 
00175 
<a name="l00178"></a><a class="code" href="classwxXml2Property.html#z0_0">00178</a>     wxString            GetName()<span class="keyword"> const                 </span>{ <span class="keywordflow">return</span> m_attr-&gt;name; }
<a name="l00179"></a><a class="code" href="classwxXml2Property.html#z0_1">00179</a>     wxString            GetValue()<span class="keyword"> const                </span>{ <span class="keywordflow">return</span> m_attr-&gt;children-&gt;content; }
00180 
<a name="l00181"></a><a class="code" href="classwxXml2Property.html#z0_2">00181</a>     <a class="code" href="xml2_8h.html#a3">wxXml2Property</a>      GetNext()<span class="keyword"> const                 </span>{ <span class="keywordflow">return</span> <a class="code" href="xml2_8h.html#a3">wxXml2Property</a>(m_attr-&gt;next); }
<a name="l00182"></a><a class="code" href="classwxXml2Property.html#z0_3">00182</a>         <a class="code" href="xml2_8h.html#a3">wxXml2Property</a>  GetPrevious()<span class="keyword"> const             </span>{ <span class="keywordflow">return</span> <a class="code" href="xml2_8h.html#a3">wxXml2Property</a>(m_attr-&gt;prev); }
00183 
00184         <a class="code" href="xml2_8h.html#a2">wxXml2Node</a>              GetOwner() <span class="keyword">const</span>;       <span class="comment">// cannot be implemented here: wxXml2Node not defined yet</span>
00185 
<a name="l00187"></a><a class="code" href="classwxXml2Property.html#z0_5">00187</a>         xmlAttr *GetObj()<span class="keyword"> const                                 </span>{ <span class="keywordflow">return</span> m_attr; }
00188         
00190 
00191 
00192 
00195     
00196     <span class="keywordtype">void</span> SetValue(<span class="keyword">const</span> wxString &amp;value);
00197     <span class="keywordtype">void</span> SetName(<span class="keyword">const</span> wxString &amp;name);
00198 
00199     <span class="keywordtype">void</span> SetNext(wxXml2Property &amp;next);
00200         <span class="keywordtype">void</span> SetPrevious(wxXml2Property &amp;prev);
00201 
00203         <span class="keywordtype">void</span> SetOwner(wxXml2Node &amp;owner);
00204         
00206 
00207 
00210     
00212         <span class="keywordtype">bool</span> IsUnlinked();
00213         
00215 };
00216 
00217 
00218 
<a name="l00235"></a><a class="code" href="classwxXml2Namespace.html">00235</a> <span class="keyword">class </span><a class="code" href="classWXXMLDLLEXPORT.html">WXXMLDLLEXPORT</a> <a class="code" href="xml2_8h.html#a4">wxXml2Namespace</a> : <span class="keyword">public</span> wxObject
00236 {
00237         DECLARE_DYNAMIC_CLASS(<a class="code" href="xml2_8h.html#a4">wxXml2Namespace</a>)
00238 
00239         
00240         xmlNs *m_ns;
00241 
00243         <a class="code" href="xml2_8h.html#a2">wxXml2Node</a> *m_owner;
00244 
00245 
00246         <span class="keywordtype">void</span> Destroy() {
00247                 <span class="keywordflow">if</span> (m_ns) xmlFreeNs(m_ns);
00248                 m_ns = NULL;
00249         }
00250 
00251 
00252 <span class="keyword">public</span>:
00253 
<a name="l00255"></a><a class="code" href="classwxXml2Namespace.html#a0">00255</a>         <a class="code" href="xml2_8h.html#a4">wxXml2Namespace</a>() : m_ns(NULL), m_owner(NULL) {};
00256 
<a name="l00260"></a><a class="code" href="classwxXml2Namespace.html#a1">00260</a>     <a class="code" href="xml2_8h.html#a4">wxXml2Namespace</a>(<span class="keyword">const</span> wxString &amp;prefix, <span class="keyword">const</span> wxString &amp;uri,
00261                 wxXml2Node &amp;owner = wxXml2EmptyNode) : m_ns(NULL) {
00262                 Create(prefix, uri, owner);
00263         }
00264 
<a name="l00266"></a><a class="code" href="classwxXml2Namespace.html#a2">00266</a>         <a class="code" href="xml2_8h.html#a4">wxXml2Namespace</a>(xmlNs *ns, wxXml2Node &amp;owner) : m_ns(NULL), m_owner(NULL) {
00267                 m_ns = ns;
00268                 m_owner = &amp;owner;
00269         }
00270 
<a name="l00273"></a><a class="code" href="classwxXml2Namespace.html#a3">00273</a>     <span class="keyword">virtual</span> ~<a class="code" href="xml2_8h.html#a4">wxXml2Namespace</a>() {}
00274 
00275         <span class="keywordtype">bool</span> operator==(<span class="keyword">const</span> wxXml2Namespace &amp;ns);
<a name="l00276"></a><a class="code" href="classwxXml2Namespace.html#a5">00276</a>         <span class="keywordtype">bool</span> operator!=(<span class="keyword">const</span> wxXml2Namespace &amp;p) { <span class="keywordflow">return</span> !(*<span class="keyword">this</span> == p); }
00277 
00279         <span class="keywordtype">void</span> Create(<span class="keyword">const</span> wxString &amp;prefix, <span class="keyword">const</span> wxString &amp;uri,
00280                 wxXml2Node &amp;owner);
00281                 
00282 
00285     
<a name="l00286"></a><a class="code" href="classwxXml2Namespace.html#z3_0">00286</a>     wxString    GetPrefix()<span class="keyword"> const                       </span>{ <span class="keywordflow">return</span> m_ns-&gt;prefix; }
<a name="l00287"></a><a class="code" href="classwxXml2Namespace.html#z3_1">00287</a>     wxString    GetURI()<span class="keyword"> const                          </span>{ <span class="keywordflow">return</span> m_ns-&gt;href; }
00289 
<a name="l00291"></a><a class="code" href="classwxXml2Namespace.html#z3_2">00291</a>         xmlNs           *GetObj()<span class="keyword"> const                         </span>{ <span class="keywordflow">return</span> m_ns; }
00292         
00294         
00295 
00298     
00299     <span class="keywordtype">void</span> SetPrefix(<span class="keyword">const</span> wxString &amp;p);
00300     <span class="keywordtype">void</span> SetURI(<span class="keyword">const</span> wxString &amp;u);
00302         
00304 };
00305 
00306 
00307 
00308 
<a name="l00313"></a><a class="code" href="classwxXml2Document.html">00313</a> <span class="keyword">class </span><a class="code" href="classWXXMLDLLEXPORT.html">WXXMLDLLEXPORT</a> <a class="code" href="xml2_8h.html#a5">wxXml2Document</a> : <span class="keyword">public</span> wxObject
00314 {
00315         DECLARE_DYNAMIC_CLASS(<a class="code" href="xml2_8h.html#a5">wxXml2Document</a>)
00316 
00317         
00318         xmlDoc *m_doc;
00319 
00320 <span class="keyword">public</span>:
00321 
<a name="l00323"></a><a class="code" href="classwxXml2Document.html#a0">00323</a>     <a class="code" href="xml2_8h.html#a5">wxXml2Document</a>() {
00324                 m_doc = xmlNewDoc((xmlChar*)wxT(<span class="stringliteral">"1.0"</span>));
00325         };
00326 
<a name="l00328"></a><a class="code" href="classwxXml2Document.html#a1">00328</a>     <a class="code" href="xml2_8h.html#a5">wxXml2Document</a>(<span class="keyword">const</span> wxString &amp;filename) {
00329                 m_doc = xmlParseFile(filename);         
00330         }
00331 
<a name="l00333"></a><a class="code" href="classwxXml2Document.html#a2">00333</a>         <a class="code" href="xml2_8h.html#a5">wxXml2Document</a>(xmlDoc *doc) {
00334                 m_doc = doc;
00335         }
00336 
<a name="l00338"></a><a class="code" href="classwxXml2Document.html#a3">00338</a>     <span class="keyword">virtual</span> ~<a class="code" href="xml2_8h.html#a5">wxXml2Document</a>() {
00342         }
00343 
<a name="l00345"></a><a class="code" href="classwxXml2Document.html#a4">00345</a>         <span class="keywordtype">void</span> Destroy() {
00346                 <span class="keywordflow">if</span> (m_doc) xmlFreeDoc(m_doc);
00347                 m_doc = NULL;
00348         }
00349 
00351         <span class="keywordtype">bool</span> operator==(<span class="keyword">const</span> wxXml2Document &amp;doc);
<a name="l00352"></a><a class="code" href="classwxXml2Document.html#a6">00352</a>         <span class="keywordtype">bool</span> operator!=(<span class="keyword">const</span> wxXml2Document &amp;doc) {
00353                 <span class="keywordflow">return</span> !(*<span class="keyword">this</span> == doc);
00354         }
00355 
00357         <span class="keywordtype">bool</span> Load(wxInputStream&amp; stream, wxString *pErr = NULL);
00358 
<a name="l00362"></a><a class="code" href="classwxXml2Document.html#a8">00362</a>     <span class="keywordtype">bool</span> Load(<span class="keyword">const</span> wxString &amp;filename, wxString *pErr = NULL) {
00363                 wxFileInputStream stream(filename);     
00364                 <span class="keywordflow">if</span> (!stream.IsOk() || !wxFileName::FileExists(filename)) <span class="keywordflow">return</span> FALSE;          
00365                 <span class="keywordflow">return</span> Load(stream, pErr);
00366         }
00367     
00369     <span class="keywordtype">bool</span> Save(wxOutputStream&amp; stream, <span class="keyword">const</span> wxString &amp;encoding = wxT(<span class="stringliteral">"UTF-8"</span>), 
00370                 <span class="keywordtype">int</span> indentstep = 1) <span class="keyword">const</span>;
00371 
<a name="l00374"></a><a class="code" href="classwxXml2Document.html#a10">00374</a>         <span class="keywordtype">bool</span> Save(<span class="keyword">const</span> wxString &amp;filename, <span class="keyword">const</span> wxString &amp;encoding = wxT(<span class="stringliteral">"UTF-8"</span>), 
00375                         <span class="keywordtype">int</span> indentstep = 1)<span class="keyword"> const </span>{
00376                 wxFileOutputStream stream(filename);
00377                 <span class="keywordflow">if</span> (!stream.IsOk()) <span class="keywordflow">return</span> FALSE;
00378                 <span class="keywordflow">return</span> Save(stream, encoding, indentstep);
00379         }
00380 
<a name="l00382"></a><a class="code" href="classwxXml2Document.html#a11">00382</a>     <span class="keywordtype">bool</span> IsOk()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> xmlDocGetRootElement(m_doc) != NULL; }
00383 
00385     <a class="code" href="xml2_8h.html#a2">wxXml2Node</a> GetRoot() <span class="keyword">const</span>;
00386 
<a name="l00388"></a><a class="code" href="classwxXml2Document.html#a13">00388</a>     wxString GetVersion()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_doc-&gt;version; }
00389 
<a name="l00393"></a><a class="code" href="classwxXml2Document.html#a14">00393</a>     wxString GetFileEncoding()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_doc-&gt;encoding; }
00394 
<a name="l00396"></a><a class="code" href="classwxXml2Document.html#a15">00396</a>     <span class="keywordtype">void</span> SetRoot(wxXml2Node &amp;node) { xmlDocSetRootElement(m_doc, node.<a class="code" href="classwxXml2Node.html#z7_11">GetObj</a>()); }
00397 
<a name="l00399"></a><a class="code" href="classwxXml2Document.html#a16">00399</a>         xmlDoc *GetObj()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_doc; }
00400 };
00401 
00402 
00403 
00404 
00405 
<a name="l00411"></a><a class="code" href="classwxXml2NodeRefData.html">00411</a> <span class="keyword">class </span><a class="code" href="classWXXMLDLLEXPORT.html">WXXMLDLLEXPORT</a> wxXml2NodeRefData : <span class="keyword">public</span> wxObjectRefData
00412 {
<a name="l00413"></a><a class="code" href="classwxXml2NodeRefData.html#n0">00413</a>     <span class="keyword">friend</span> <span class="keyword">class </span>WXDLLEXPORT <a class="code" href="xml2_8h.html#a2">wxXml2Node</a>;
00414 
00415 <span class="keyword">public</span>:
<a name="l00416"></a><a class="code" href="classwxXml2NodeRefData.html#a0">00416</a>     wxXml2NodeRefData(xmlNode *p = NULL) {
00417                 m_node = p;
00418         }
<a name="l00419"></a><a class="code" href="classwxXml2NodeRefData.html#a1">00419</a>     wxXml2NodeRefData(<span class="keyword">const</span> wxXml2NodeRefData&amp; data) {
00420                 m_node = xmlCopyNode(data.<a class="code" href="classwxXml2NodeRefData.html#a3">GetPtr</a>(), 1);
00421         }
<a name="l00422"></a><a class="code" href="classwxXml2NodeRefData.html#a2">00422</a>     ~wxXml2NodeRefData() {
00423                 <span class="comment">// check if this node is completely</span>
00424                 <span class="comment">// unlinked from any other node</span>
00425                 <span class="keywordflow">if</span> (IsUnlinked()) {
00428                         xmlUnlinkNode(m_node);
00429                         xmlFreeNode(m_node);
00430                         m_node = NULL;
00431                 } <span class="keywordflow">else</span> {
00432                         <span class="comment">// this node is still linked in some way to a greater XML tree;</span>
00433                         <span class="comment">// something else (like the root node) will care about the</span>
00434                         <span class="comment">// destruction of this node</span>
00435                 }
00436         }
00437 
<a name="l00439"></a><a class="code" href="classwxXml2NodeRefData.html#a3">00439</a>         xmlNode *GetPtr()<span class="keyword"> const         </span>{ <span class="keywordflow">return</span> m_node; }
00440 
<a name="l00442"></a><a class="code" href="classwxXml2NodeRefData.html#a4">00442</a>         <span class="keywordtype">bool</span> IsUnlinked() {
00443                 <span class="keywordflow">if</span> (m_node != NULL &amp;&amp; m_node-&gt;parent == NULL &amp;&amp; 
00444                         m_node-&gt;prev == NULL &amp;&amp; m_node-&gt;next == NULL)
00445                         <span class="keywordflow">return</span> TRUE;
00446                 <span class="keywordflow">return</span> FALSE;
00447         }
00448 
00449 <span class="keyword">protected</span>:
<a name="l00450"></a><a class="code" href="classwxXml2NodeRefData.html#p0">00450</a>         xmlNode *m_node;
00451 };
00452 
00453 
<a name="l00475"></a><a class="code" href="classwxXml2Node.html">00475</a> <span class="keyword">class </span><a class="code" href="classWXXMLDLLEXPORT.html">WXXMLDLLEXPORT</a> <a class="code" href="xml2_8h.html#a2">wxXml2Node</a> : <span class="keyword">public</span> wxObject
00476 {
00477         DECLARE_DYNAMIC_CLASS(<a class="code" href="xml2_8h.html#a2">wxXml2Node</a>)
00478 
00479         
00480         <span class="keywordtype">void</span> Build(<span class="keyword">const</span> <a class="code" href="xml2_8h.html#a19">wxXml2NodeType</a> type,
00481                                 <a class="code" href="xml2_8h.html#a2">wxXml2Node</a> &amp;parent,
00482                                 <a class="code" href="xml2_8h.html#a5">wxXml2Document</a> &amp;document = <a class="code" href="xml2_8cpp.html#a1">wxXml2EmptyDoc</a>, 
00483                                 <a class="code" href="xml2_8h.html#a4">wxXml2Namespace</a> &amp;ns = <a class="code" href="xml2_8cpp.html#a4">wxXml2EmptyNamespace</a>,
00484                                 <span class="keyword">const</span> wxString &amp;name = wxEmptyString, 
00485                                 <span class="keyword">const</span> wxString &amp;content = wxEmptyString,
00486                                 <span class="keyword">const</span> <a class="code" href="xml2_8h.html#a3">wxXml2Property</a> &amp;props = <a class="code" href="xml2_8cpp.html#a3">wxXml2EmptyProperty</a>, 
00487                                 <span class="keyword">const</span> <a class="code" href="xml2_8h.html#a2">wxXml2Node</a> &amp;next = <a class="code" href="xml2_8cpp.html#a2">wxXml2EmptyNode</a>,
00488                                 <span class="keyword">const</span> <a class="code" href="xml2_8h.html#a2">wxXml2Node</a> &amp;previous = <a class="code" href="xml2_8cpp.html#a2">wxXml2EmptyNode</a>,
00489                                 <span class="keyword">const</span> <a class="code" href="xml2_8h.html#a2">wxXml2Node</a> &amp;children = <a class="code" href="xml2_8cpp.html#a2">wxXml2EmptyNode</a>);
00490 
00492         xmlNode *Node()                 { <span class="keywordflow">return</span> m_refData ? ((wxXml2NodeRefData *)m_refData)-&gt;m_node : NULL; }
00493         xmlNode *Node()<span class="keyword"> const   </span>{ <span class="keywordflow">return</span> m_refData ? ((wxXml2NodeRefData *)m_refData)-&gt;m_node : NULL; }
00494 
00495 <span class="keyword">public</span>:
00496 
<a name="l00499"></a><a class="code" href="classwxXml2Node.html#a0">00499</a>         <a class="code" href="xml2_8h.html#a2">wxXml2Node</a>() {
00500                 <span class="comment">// before this node can be used it must be constructed through</span>
00501                 <span class="comment">// Create****() functions. See below.</span>
00502         }
00503 
<a name="l00509"></a><a class="code" href="classwxXml2Node.html#a1">00509</a>     <a class="code" href="xml2_8h.html#a2">wxXml2Node</a>(wxXml2Document doc,
00510                                 <span class="keyword">const</span> wxString &amp;name = wxEmptyString, 
00511                                 wxXml2Namespace ns = wxXml2EmptyNamespace) {
00512                 CreateRoot(doc, name, ns);
00513         }
00514 
<a name="l00516"></a><a class="code" href="classwxXml2Node.html#a2">00516</a>     <a class="code" href="xml2_8h.html#a2">wxXml2Node</a>(wxXml2NodeType type,
00517                                 wxXml2Node parent,
00518                                 <span class="keyword">const</span> wxString &amp;name, 
00519                                 <span class="keyword">const</span> wxString &amp;content = wxEmptyString,
00520                                 wxXml2Namespace ns = wxXml2EmptyNamespace) {
00521                 CreateChild(type, parent, name, content, ns);
00522         }
00523 
<a name="l00526"></a><a class="code" href="classwxXml2Node.html#a3">00526</a>     <a class="code" href="xml2_8h.html#a2">wxXml2Node</a>(wxXml2NodeType type, wxXml2Document doc,
00527                                 <span class="keyword">const</span> wxString &amp;name = wxEmptyString, 
00528                                 <span class="keyword">const</span> wxString &amp;content = wxEmptyString,
00529                                 wxXml2Namespace ns = wxXml2EmptyNamespace) {
00530                 CreateTemp(type, doc, name, content, ns);
00531         }
00532 
<a name="l00535"></a><a class="code" href="classwxXml2Node.html#a4">00535</a>         <a class="code" href="xml2_8h.html#a2">wxXml2Node</a>(xmlNode *node) {
00536                 m_refData = <span class="keyword">new</span> wxXml2NodeRefData(node);
00537         }
00538 
<a name="l00540"></a><a class="code" href="classwxXml2Node.html#a5">00540</a>         <a class="code" href="xml2_8h.html#a2">wxXml2Node</a>(<span class="keyword">const</span> wxXml2Node &amp;node) { 
00541                 Ref(node);
00542         }
00543 
<a name="l00544"></a><a class="code" href="classwxXml2Node.html#a6">00544</a>         <span class="keyword">virtual</span> ~<a class="code" href="xml2_8h.html#a2">wxXml2Node</a>() {}
00545 
00546 
00547 
00548         <span class="comment">// overloaded operators</span>
00549         <a class="code" href="xml2_8h.html#a2">wxXml2Node</a> &amp;operator=(<span class="keyword">const</span> wxXml2Node &amp;n);
00550         <span class="keywordtype">bool</span> operator==(<span class="keyword">const</span> wxXml2Node &amp;node);
<a name="l00551"></a><a class="code" href="classwxXml2Node.html#a9">00551</a>         <span class="keywordtype">bool</span> operator!=(<span class="keyword">const</span> wxXml2Node &amp;p)                                    { <span class="keywordflow">return</span> !(*<span class="keyword">this</span> == p); }
00552         
00553 
00556 
00558         <span class="keywordtype">void</span> CreateRoot(wxXml2Document doc,
00559                                 <span class="keyword">const</span> wxString &amp;name = wxEmptyString, 
00560                                 wxXml2Namespace ns = wxXml2EmptyNamespace,
00561                                 <span class="keyword">const</span> wxXml2Property props = wxXml2EmptyProperty);
00562         
00563         <span class="keywordtype">void</span> CreateChild(wxXml2NodeType type,
00564                                 wxXml2Node parent,
00565                                 <span class="keyword">const</span> wxString &amp;name, 
00566                                 <span class="keyword">const</span> wxString &amp;content = wxEmptyString,
00567                                 wxXml2Namespace ns = wxXml2EmptyNamespace,
00568                                 <span class="keyword">const</span> wxXml2Property props = wxXml2EmptyProperty, 
00569                                 <span class="keyword">const</span> wxXml2Node next = wxXml2EmptyNode);
00570 
00571         <span class="keywordtype">void</span> CreateTemp(wxXml2NodeType type, 
00572                                 wxXml2Document doc,
00573                                 <span class="keyword">const</span> wxString &amp;name = wxEmptyString, 
00574                                 <span class="keyword">const</span> wxString &amp;content = wxEmptyString,
00575                                 wxXml2Namespace ns = wxXml2EmptyNamespace,
00576                                 <span class="keyword">const</span> wxXml2Property props = wxXml2EmptyProperty);      
00577 
00579         <a class="code" href="xml2_8h.html#a2">wxXml2Node</a> AddContainerChild(<span class="keyword">const</span> wxString &amp;name);
00580 
00585         <a class="code" href="xml2_8h.html#a2">wxXml2Node</a> AddTextChild(<span class="keyword">const</span> wxString &amp;name, <span class="keyword">const</span> wxString &amp;content);
00586 
00588         <a class="code" href="xml2_8h.html#a2">wxXml2Node</a> AddCommentChild(<span class="keyword">const</span> wxString &amp;content);
00589 
00597         <a class="code" href="xml2_8h.html#a2">wxXml2Node</a> AddBreakLineChild(<span class="keywordtype">int</span> breaklines = 1);
00598 
00600         <a class="code" href="xml2_8h.html#a3">wxXml2Property</a> AddProperty(<span class="keyword">const</span> wxString &amp;name, <span class="keyword">const</span> wxString &amp;value);
00601         <a class="code" href="xml2_8h.html#a4">wxXml2Namespace</a> AddNamespace(<span class="keyword">const</span> wxString &amp;prefix, <span class="keyword">const</span> wxString &amp;href);
00602         
00604         
00605         
00606 
00607 
00610     
00611         <span class="keywordtype">void</span> AddProperty(wxXml2Property prop);
00612         <span class="keywordtype">void</span> AddChild(wxXml2Node node);
00613         <span class="keywordtype">void</span> AddPrevious(wxXml2Node node);
00614         
00616 
00617 
00618 
00621     
<a name="l00622"></a><a class="code" href="classwxXml2Node.html#z7_0">00622</a>     <a class="code" href="xml2_8h.html#a19">wxXml2NodeType</a>      GetType()<span class="keyword"> const                 </span>{ <span class="keywordflow">return</span> (<a class="code" href="xml2_8h.html#a19">wxXml2NodeType</a>)((<span class="keywordtype">int</span>)Node()-&gt;type); }
<a name="l00623"></a><a class="code" href="classwxXml2Node.html#z7_1">00623</a>     wxString            GetName()<span class="keyword"> const                 </span>{ <span class="keywordflow">return</span> Node()-&gt;name; }
<a name="l00624"></a><a class="code" href="classwxXml2Node.html#z7_2">00624</a>     wxString            GetContent()<span class="keyword"> const              </span>{ <span class="keywordflow">return</span> Node()-&gt;content; }
00625 
<a name="l00626"></a><a class="code" href="classwxXml2Node.html#z7_3">00626</a>     <a class="code" href="xml2_8h.html#a2">wxXml2Node</a>          GetParent()<span class="keyword"> const               </span>{ <span class="keywordflow">return</span> <a class="code" href="xml2_8h.html#a2">wxXml2Node</a>(Node()-&gt;parent); }
<a name="l00627"></a><a class="code" href="classwxXml2Node.html#z7_4">00627</a>     <a class="code" href="xml2_8h.html#a2">wxXml2Node</a>          GetChildren()<span class="keyword"> const             </span>{ <span class="keywordflow">return</span> <a class="code" href="xml2_8h.html#a2">wxXml2Node</a>(Node()-&gt;children); }
<a name="l00628"></a><a class="code" href="classwxXml2Node.html#z7_5">00628</a>     <a class="code" href="xml2_8h.html#a2">wxXml2Node</a>          GetFirstChild()<span class="keyword"> const   </span>{ <span class="keywordflow">return</span> GetChildren(); }
<a name="l00629"></a><a class="code" href="classwxXml2Node.html#z7_6">00629</a>     <a class="code" href="xml2_8h.html#a2">wxXml2Node</a>          GetNext()<span class="keyword"> const                 </span>{ <span class="keywordflow">return</span> <a class="code" href="xml2_8h.html#a2">wxXml2Node</a>(Node()-&gt;next); }
<a name="l00630"></a><a class="code" href="classwxXml2Node.html#z7_7">00630</a>         <a class="code" href="xml2_8h.html#a2">wxXml2Node</a>              GetPrevious()<span class="keyword"> const             </span>{ <span class="keywordflow">return</span> <a class="code" href="xml2_8h.html#a2">wxXml2Node</a>(Node()-&gt;prev); }
00631 
<a name="l00632"></a><a class="code" href="classwxXml2Node.html#z7_8">00632</a>         <a class="code" href="xml2_8h.html#a5">wxXml2Document</a>   GetDoc()<span class="keyword"> const                 </span>{ <span class="keywordflow">return</span> <a class="code" href="xml2_8h.html#a5">wxXml2Document</a>(Node()-&gt;doc); }
<a name="l00633"></a><a class="code" href="classwxXml2Node.html#z7_9">00633</a>     <a class="code" href="xml2_8h.html#a3">wxXml2Property</a>      GetProperties()<span class="keyword"> const   </span>{ <span class="keywordflow">return</span> <a class="code" href="xml2_8h.html#a3">wxXml2Property</a>(Node()-&gt;properties); }
<a name="l00634"></a><a class="code" href="classwxXml2Node.html#z7_10">00634</a>     <a class="code" href="xml2_8h.html#a4">wxXml2Namespace</a>  GetNamespace()<span class="keyword"> const       </span>{ <span class="keywordflow">return</span> <a class="code" href="xml2_8h.html#a4">wxXml2Namespace</a>(Node()-&gt;ns, (<a class="code" href="xml2_8h.html#a2">wxXml2Node</a> &amp;)(*<span class="keyword">this</span>)); }
00635 
<a name="l00638"></a><a class="code" href="classwxXml2Node.html#z7_11">00638</a>         xmlNode *GetObj()<span class="keyword"> const                                 </span>{ <span class="keywordflow">return</span> Node(); }
00639 
00642         <span class="keywordtype">bool</span> GetPropVal(<span class="keyword">const</span> wxString &amp;propName, wxString *value) <span class="keyword">const</span>;
00643 
00646     wxString GetPropVal(<span class="keyword">const</span> wxString &amp;propName, <span class="keyword">const</span> wxString &amp;defaultVal) <span class="keyword">const</span>;
00647 
<a name="l00649"></a><a class="code" href="classwxXml2Node.html#z7_14">00649</a>         <a class="code" href="xml2_8h.html#a2">wxXml2Node</a> Get(<span class="keyword">const</span> wxString &amp;name, <span class="keywordtype">int</span> n = 0) { <span class="keywordflow">return</span> Find(name, wxT(<span class="stringliteral">""</span>), n); }
00650         
00652 
00653 
00654 
<a name="l00658"></a><a class="code" href="classwxXml2Node.html#z8_0">00658</a>     <span class="keywordtype">void</span> SetType(wxXml2NodeType type)           { Node()-&gt;type = (xmlElementType)((<span class="keywordtype">int</span>)type); }
<a name="l00659"></a><a class="code" href="classwxXml2Node.html#z8_1">00659</a>     <span class="keywordtype">void</span> SetName(<span class="keyword">const</span> wxString &amp;name)          { xmlNodeSetName(GetObj(), <a class="code" href="xml2_8h.html#a1">WX2XML</a>(name)); }
<a name="l00660"></a><a class="code" href="classwxXml2Node.html#z8_2">00660</a>     <span class="keywordtype">void</span> SetContent(<span class="keyword">const</span> wxString &amp;cont)       { xmlNodeSetContent(GetObj(), <a class="code" href="xml2_8h.html#a1">WX2XML</a>(cont)); }
00662 
00664     <span class="keywordtype">void</span> SetChildren(<span class="keyword">const</span> wxXml2Node &amp;child);
00665     <span class="keywordtype">void</span> SetNext(<span class="keyword">const</span> wxXml2Node &amp;next);
00666         <span class="keywordtype">void</span> SetPrevious(<span class="keyword">const</span> wxXml2Node &amp;prev);
00667 
00668     <span class="keywordtype">void</span> SetProperties(<span class="keyword">const</span> wxXml2Property &amp;prop);
00669     <span class="keywordtype">void</span> SetNamespace(wxXml2Namespace ns);
00670     
00672     
00673 
00674 
00677         
<a name="l00678"></a><a class="code" href="classwxXml2Node.html#z9_0">00678</a>         <span class="keywordtype">bool</span> IsUnlinked()<span class="keyword"> const                                         </span>{ <span class="keywordflow">return</span> ((wxXml2NodeRefData*)m_refData)-&gt;IsUnlinked(); }
<a name="l00679"></a><a class="code" href="classwxXml2Node.html#z9_1">00679</a>         <span class="keywordtype">bool</span> Contains(<span class="keyword">const</span> wxXml2Node &amp;tofind)<span class="keyword"> const   </span>{ <span class="keywordflow">return</span> (Find(tofind) != <a class="code" href="xml2_8cpp.html#a2">wxXml2EmptyNode</a>); }
00680     <span class="keywordtype">bool</span> HasProp(<span class="keyword">const</span> wxString &amp;propName) <span class="keyword">const</span>;
00681     
00683 
00684 
00687         
00688         <span class="keywordtype">void</span> MakeUpper();
00689         <span class="keywordtype">void</span> MakeLower();
00690 
00693         <span class="keywordtype">bool</span> Cmp(<span class="keyword">const</span> wxXml2Node &amp;node) <span class="keyword">const</span>;
00694 
00696         <span class="keywordtype">bool</span> CmpNoNs(<span class="keyword">const</span> wxXml2Node &amp;node) <span class="keyword">const</span>;
00697 
00701         <span class="keywordtype">void</span> Replace(<span class="keyword">const</span> wxXml2Node &amp;newnode);
00702 
00716         <a class="code" href="xml2_8h.html#a2">wxXml2Node</a> Find(<span class="keyword">const</span> wxString &amp;name, 
00717                                         <span class="keyword">const</span> wxString &amp;content = wxEmptyString,
00718                                         <span class="keywordtype">int</span> occ = 0, <span class="keywordtype">bool</span> bNS = TRUE) <span class="keyword">const</span>;
00719 
00722         <a class="code" href="xml2_8h.html#a2">wxXml2Node</a> Find(<span class="keyword">const</span> wxXml2Node &amp;tofind, <span class="keywordtype">int</span> occ = 0, <span class="keywordtype">bool</span> bNS = TRUE) <span class="keyword">const</span>;
00723 
00733         <span class="keywordtype">void</span> Encapsulate(<span class="keyword">const</span> wxString &amp;nodename);
00734         
00736 };
00737 
00738 <span class="preprocessor">#endif // _WX_XML2_H_</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Jul 18 13:10:57 2004 for wxXml2 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
